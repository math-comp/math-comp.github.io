<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>mathcomp.ssreflect.ssrAC</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library mathcomp.ssreflect.ssrAC</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPos.html#"><span class="id" title="library">BinPos</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.NArith.BinNat.html#"><span class="id" title="library">BinNat</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">mathcomp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mathcomp.ssreflect.ssreflect.html#"><span class="id" title="library">ssreflect</span></a> <a class="idref" href="mathcomp.ssreflect.ssrbool.html#"><span class="id" title="library">ssrbool</span></a> <a class="idref" href="mathcomp.ssreflect.ssrfun.html#"><span class="id" title="library">ssrfun</span></a> <a class="idref" href="mathcomp.ssreflect.ssrnat.html#"><span class="id" title="library">ssrnat</span></a> <a class="idref" href="mathcomp.ssreflect.eqtype.html#"><span class="id" title="library">eqtype</span></a> <a class="idref" href="mathcomp.ssreflect.seq.html#"><span class="id" title="library">seq</span></a> <a class="idref" href="mathcomp.ssreflect.bigop.html#"><span class="id" title="library">bigop</span></a>.<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
</div>

<div class="doc">
 Small Scale Rewriting using Associatity and Commutativity            

<div class="paragraph"> </div>

 Rewriting with AC (not modulo AC), using a small scale command.      
 Replaces opA, opC, opAC, opCA, ... and any combinations of them      

<div class="paragraph"> </div>

 Usage :                                                              
   rewrite [pattern](AC patternshape reordering)                      
   rewrite [pattern](ACl reordering)                                  
   rewrite [pattern](ACof reordering reordering)                      
   rewrite [pattern]op. [AC patternshape reordering]                   
   rewrite [pattern]op. [ACl reordering]                               
   rewrite [pattern]op. [ACof reordering reordering]                   

<div class="paragraph"> </div>

<ul class="doclist">
<li> if op is specified, the rule is specialized to op                  
   otherwise,          the head symbol is a generic comm_law          
                       and the rewrite might be less efficient        
   NOTE because of a bug in Coq's notations coq/coq#8190              
        op must not contain any hole.                                 
        *%R. [AC p s] currently does not work because of that          
        (@GRing.mul R). [AC p s] must be used instead                  

<div class="paragraph"> </div>


</li>
<li> pattern is optional, as usual, but must be used to select the      
   appropriate operator in case of ambiguity such an operator must    
   have a canonical Monoid.com_law structure                          
   (additions, multiplications, conjuction and disjunction do)        

<div class="paragraph"> </div>


</li>
<li> patternshape is expressed using the syntax                         
      p := n | p * p'                                                 
      where "*" is purely formal                                      
        and n &gt; 0 is number of left associated symbols                
   examples of pattern shapes:                                        
   + 4 represents (n * m * p * q)                                     
   + (1*2) represents (n * (m * p))                                   

<div class="paragraph"> </div>


</li>
<li> reordering is expressed using the syntax                           
     s := n | s * s'                                                  
   where "*" is purely formal and n &gt; 0 is the position in the LHS    
   positions start at 1 !                                             

</li>
</ul>

<div class="paragraph"> </div>

 If the ACl variant is used, the patternshape defaults to the         
 pattern fully associated to the left i.e. n i.e (x * y * ...)        

<div class="paragraph"> </div>

 Examples of reorderings:                                             
<ul class="doclist">
<li> ACl ((1*2)*3) is the identity (and will fail with error message)   

</li>
<li> opAC == op. [ACl (1*3)*2] == op. [AC 3 ((1*3)*2) ]                    

</li>
<li> opCA == op. [AC (2*1) (1*2*3) ]                                      

</li>
<li> opACA == op. [AC (2*2) ((1*3)*(2*4)) ]                               

</li>
<li> rewrite opAC -opA == rewrite op. [ACl 1*(3*2) ]                      

</li>
</ul>
 ...                                                                   
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">AC_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">AC</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="change_type"><span class="id" title="definition">change_type</span></a> <span class="id" title="var">ty</span> <span class="id" title="var">ty'</span> (<span class="id" title="var">x</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#ty"><span class="id" title="variable">ty</span></a>) (<span class="id" title="var">strategy</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#ty'"><span class="id" title="variable">ty'</span></a>) : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#ty'"><span class="id" title="variable">ty'</span></a> :=<br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrfun.html#ecast"><span class="id" title="abbreviation">ecast</span></a> <span class="id" title="var">ty</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#strategy"><span class="id" title="variable">strategy</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#x"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a name="simplrefl"><span class="id" title="abbreviation">simplrefl</span></a> := (<span class="id" title="keyword">ltac</span>: (<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">reflexivity</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a name="cbvrefl"><span class="id" title="abbreviation">cbvrefl</span></a> := (<span class="id" title="keyword">ltac</span>: (<span class="id" title="tactic">cbv</span>; <span class="id" title="tactic">reflexivity</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a name="vmrefl"><span class="id" title="abbreviation">vmrefl</span></a> := (<span class="id" title="keyword">ltac</span>: (<span class="id" title="keyword">vm_compute</span>; <span class="id" title="tactic">reflexivity</span>)).<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="AC"><span class="id" title="module">AC</span></a>.<br/>

<br/>
<span class="id" title="keyword">Canonical</span> <a name="AC.positive_eqType"><span class="id" title="definition">positive_eqType</span></a> := <a class="idref" href="mathcomp.ssreflect.eqtype.html#Equality.Exports.EqType"><span class="id" title="abbreviation">EqType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#positive"><span class="id" title="inductive">positive</span></a><br/>
&nbsp;&nbsp;&nbsp;(<a class="idref" href="mathcomp.ssreflect.eqtype.html#Equality.Exports.EqMixin"><span class="id" title="abbreviation">EqMixin</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> â‡’ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrbool.html#equivP"><span class="id" title="lemma">equivP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrbool.html#idP"><span class="id" title="lemma">idP</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPos.html#Pos.eqb_eq"><span class="id" title="lemma">Pos.eqb_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>))).<br/>
</div>

<div class="doc">
 Should be replaced by (EqMixin Pos.eqb_spec) for coq &gt;= 8.7  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="AC.syntax"><span class="id" title="inductive">syntax</span></a> := <a name="AC.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="keyword">of</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#positive"><span class="id" title="inductive">positive</span></a> | <a name="AC.Op"><span class="id" title="constructor">Op</span></a> <span class="id" title="keyword">of</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#syntax"><span class="id" title="inductive">syntax</span></a> &amp; <a class="idref" href="mathcomp.ssreflect.ssrAC.html#syntax"><span class="id" title="inductive">syntax</span></a>.<br/>
<span class="id" title="keyword">Coercion</span> <a name="AC.serial"><span class="id" title="definition">serial</span></a> := (<span class="id" title="keyword">fix</span> <span class="id" title="var">loop</span> (<span class="id" title="var">acc</span> : <a class="idref" href="mathcomp.ssreflect.seq.html#seq"><span class="id" title="abbreviation">seq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#positive"><span class="id" title="inductive">positive</span></a>) (<span class="id" title="var">s</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.syntax"><span class="id" title="inductive">syntax</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">n</span> â‡’ <span class="id" title="var">n</span> <a class="idref" href="mathcomp.ssreflect.seq.html#407cde5b61fbf27196d1a7c5a475e083"><span class="id" title="notation">::</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Op"><span class="id" title="constructor">Op</span></a> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> â‡’ (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrfun.html#d89396f990d6b54d736cfe259e498cf4"><span class="id" title="notation">^~</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrfun.html#d89396f990d6b54d736cfe259e498cf4"><span class="id" title="notation">^~</span></a> <span class="id" title="var">s'</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#acc"><span class="id" title="variable">acc</span></a>))<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626"><span class="id" title="notation">[::]</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="AC.serial_Op"><span class="id" title="lemma">serial_Op</span></a> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Op"><span class="id" title="constructor">Op</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s2"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf"><span class="id" title="notation">=</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36"><span class="id" title="notation">++</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s2"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf"><span class="id" title="notation">:&gt;</span></a> <a class="idref" href="mathcomp.ssreflect.seq.html#seq"><span class="id" title="abbreviation">seq</span></a> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="AC.Leaf_of_nat"><span class="id" title="definition">Leaf_of_nat</span></a> <span class="id" title="var">n</span> := <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">Leaf</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPos.html#a7cebc9429601773e676f4bc3c959584"><span class="id" title="notation">(</span></a><a class="idref" href="mathcomp.ssreflect.ssrnat.html#pos_of_nat"><span class="id" title="definition">pos_of_nat</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPos.html#a7cebc9429601773e676f4bc3c959584"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPos.html#a7cebc9429601773e676f4bc3c959584"><span class="id" title="notation">-</span></a> 1)%<span class="id" title="var">positive</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Import</span> <a name="AC.Syntax"><span class="id" title="module">Syntax</span></a>.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">Leaf</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">:</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">positive</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">&gt;-&gt;</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">syntax</span></a>.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf_of_nat"><span class="id" title="definition">Leaf_of_nat</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf_of_nat"><span class="id" title="definition">:</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf_of_nat"><span class="id" title="definition">nat</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf_of_nat"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf_of_nat"><span class="id" title="definition">syntax</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a name="bc090602c34ea42bf324e9986431772a"><span class="id" title="notation">&quot;</span></a>1" := 1%<span class="id" title="var">positive</span> : <span class="id" title="var">AC_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a name="f1b706618d029f8523d547b33477ad6f"><span class="id" title="notation">&quot;</span></a>x * y" := (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Op"><span class="id" title="constructor">Op</span></a> <span class="id" title="var">x</span>%<span class="id" title="var">AC</span> <span class="id" title="var">y</span>%<span class="id" title="var">AC</span>) : <span class="id" title="var">AC_scope</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Syntax"><span class="id" title="module">Syntax</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="AC.pattern"><span class="id" title="definition">pattern</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.syntax"><span class="id" title="inductive">syntax</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">(</span></a>(<span class="id" title="keyword">fix</span> <span class="id" title="var">loop</span> <span class="id" title="var">n</span> <span class="id" title="var">s</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">Leaf</span></a> 1%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">Leaf</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPos.html#Pos.succ"><span class="id" title="definition">Pos.succ</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">m</span> â‡’ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPos.html#Pos.iter"><span class="id" title="definition">Pos.iter</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">oi</span> â‡’ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Op"><span class="id" title="constructor">Op</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#oi"><span class="id" title="variable">oi</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">Leaf</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#oi"><span class="id" title="variable">oi</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPos.html#Pos.succ"><span class="id" title="definition">Pos.succ</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#oi"><span class="id" title="variable">oi</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">Leaf</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPos.html#Pos.succ"><span class="id" title="definition">Pos.succ</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPos.html#a7cebc9429601773e676f4bc3c959584"><span class="id" title="notation">-</span></a> 1)%<span class="id" title="var">positive</span><br/>
&nbsp;&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Op"><span class="id" title="constructor">Op</span></a> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> â‡’ <span class="id" title="keyword">let</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">n'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">n''</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> <span class="id" title="var">n'</span> <span class="id" title="var">s'</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Op"><span class="id" title="constructor">Op</span></a> <span class="id" title="var">p</span> <span class="id" title="var">p'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">n''</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>) 1%<span class="id" title="var">positive</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">).1</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="AC.eval"><span class="id" title="section">eval</span></a>.<br/>
<span class="id" title="keyword">Variables</span> (<a name="AC.eval.T"><span class="id" title="variable">T</span></a> : <span class="id" title="keyword">Type</span>) (<a name="AC.eval.idx"><span class="id" title="variable">idx</span></a> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#T"><span class="id" title="variable">T</span></a>) (<a name="AC.eval.op"><span class="id" title="variable">op</span></a> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">â†’</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">â†’</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#T"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Inductive</span> <a name="AC.env"><span class="id" title="inductive">env</span></a> := <a name="AC.Empty"><span class="id" title="constructor">Empty</span></a> | <a name="AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="keyword">of</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.T"><span class="id" title="variable">T</span></a> &amp; <a class="idref" href="mathcomp.ssreflect.ssrAC.html#env"><span class="id" title="inductive">env</span></a> &amp; <a class="idref" href="mathcomp.ssreflect.ssrAC.html#env"><span class="id" title="inductive">env</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a name="AC.pos"><span class="id" title="definition">pos</span></a> := <span class="id" title="keyword">fix</span> <span class="id" title="var">loop</span> (<span class="id" title="var">e</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.env"><span class="id" title="inductive">env</span></a>) <span class="id" title="var">p</span> {<span class="id" title="keyword">struct</span> <span class="id" title="var">e</span>} :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a>, <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">t</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>, 1%<span class="id" title="var">positive</span> â‡’ <span class="id" title="var">t</span><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span>, (<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPosDef.html#35713fcadfdd66af247cbf95acf859fa"><span class="id" title="notation">~0</span></a>)%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">t</span> <span class="id" title="var">_</span> <span class="id" title="var">e</span>, (<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPosDef.html#119ad21c8e0c4947cd973f1f72e5feea"><span class="id" title="notation">~1</span></a>)%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a><br/>
&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.idx"><span class="id" title="variable">idx</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="AC.set_pos"><span class="id" title="definition">set_pos</span></a> (<span class="id" title="var">f</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">â†’</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.T"><span class="id" title="variable">T</span></a>) := <span class="id" title="keyword">fix</span> <span class="id" title="var">loop</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span> {<span class="id" title="keyword">struct</span> <span class="id" title="var">p</span>} :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a>, <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span>, 1%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">t</span>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="var">e'</span><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span>, (<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPosDef.html#35713fcadfdd66af247cbf95acf859fa"><span class="id" title="notation">~0</span></a>)%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">t</span> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a>) <span class="id" title="var">e'</span><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span>, (<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPosDef.html#119ad21c8e0c4947cd973f1f72e5feea"><span class="id" title="notation">~1</span></a>)%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">t</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> <span class="id" title="var">e'</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a>)<br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a>, 1%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.idx"><span class="id" title="variable">idx</span></a>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a>, (<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPosDef.html#35713fcadfdd66af247cbf95acf859fa"><span class="id" title="notation">~0</span></a>)%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.idx"><span class="id" title="variable">idx</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a>, (<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPosDef.html#119ad21c8e0c4947cd973f1f72e5feea"><span class="id" title="notation">~1</span></a>)%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.idx"><span class="id" title="variable">idx</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a>)<br/>
&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="AC.pos_set_pos"><span class="id" title="lemma">pos_set_pos</span></a> (<span class="id" title="var">f</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">â†’</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.T"><span class="id" title="variable">T</span></a>) <span class="id" title="var">e</span> (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#positive"><span class="id" title="inductive">positive</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.pos"><span class="id" title="definition">pos</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.set_pos"><span class="id" title="definition">set_pos</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p'"><span class="id" title="variable">p'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">if</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180"><span class="id" title="notation">==</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p'"><span class="id" title="variable">p'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">then</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.pos"><span class="id" title="definition">pos</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">else</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.pos"><span class="id" title="definition">pos</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p'"><span class="id" title="variable">p'</span></a>.<br/>
 
<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="AC.unzip"><span class="id" title="definition">unzip</span></a> <span class="id" title="var">z</span> (<span class="id" title="var">e</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.env"><span class="id" title="inductive">env</span></a>) : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.env"><span class="id" title="inductive">env</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#z"><span class="id" title="variable">z</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626"><span class="id" title="notation">[::]</span></a> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a><br/>
&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">e'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="mathcomp.ssreflect.seq.html#407cde5b61fbf27196d1a7c5a475e083"><span class="id" title="notation">::</span></a> <span class="id" title="var">z'</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#unzip"><span class="id" title="definition">unzip</span></a> <span class="id" title="var">z'</span> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e'</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">e'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="mathcomp.ssreflect.seq.html#407cde5b61fbf27196d1a7c5a475e083"><span class="id" title="notation">::</span></a> <span class="id" title="var">z'</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#unzip"><span class="id" title="definition">unzip</span></a> <span class="id" title="var">z'</span> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">x</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="var">e'</span>)<br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="AC.set_pos_trec"><span class="id" title="definition">set_pos_trec</span></a> (<span class="id" title="var">f</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">â†’</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.T"><span class="id" title="variable">T</span></a>) := <span class="id" title="keyword">fix</span> <span class="id" title="var">loop</span> <span class="id" title="var">z</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span> {<span class="id" title="keyword">struct</span> <span class="id" title="var">p</span>} :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a>, <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span>, 1%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.unzip"><span class="id" title="definition">unzip</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#z"><span class="id" title="variable">z</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">t</span>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="var">e'</span>)<br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span>, (<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPosDef.html#35713fcadfdd66af247cbf95acf859fa"><span class="id" title="notation">~0</span></a>)%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">e'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="mathcomp.ssreflect.seq.html#407cde5b61fbf27196d1a7c5a475e083"><span class="id" title="notation">::</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#z"><span class="id" title="variable">z</span></a>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span>, (<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPosDef.html#119ad21c8e0c4947cd973f1f72e5feea"><span class="id" title="notation">~1</span></a>)%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="mathcomp.ssreflect.seq.html#407cde5b61fbf27196d1a7c5a475e083"><span class="id" title="notation">::</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#z"><span class="id" title="variable">z</span></a>) <span class="id" title="var">e'</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a>, 1%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.unzip"><span class="id" title="definition">unzip</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#z"><span class="id" title="variable">z</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.idx"><span class="id" title="variable">idx</span></a>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a>)<br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a>, (<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPosDef.html#35713fcadfdd66af247cbf95acf859fa"><span class="id" title="notation">~0</span></a>)%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.idx"><span class="id" title="variable">idx</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <a class="idref" href="mathcomp.ssreflect.seq.html#407cde5b61fbf27196d1a7c5a475e083"><span class="id" title="notation">::</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#z"><span class="id" title="variable">z</span></a>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a><br/>
&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a>, (<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.PArith.BinPosDef.html#119ad21c8e0c4947cd973f1f72e5feea"><span class="id" title="notation">~1</span></a>)%<span class="id" title="var">positive</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.idx"><span class="id" title="variable">idx</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <a class="idref" href="mathcomp.ssreflect.seq.html#407cde5b61fbf27196d1a7c5a475e083"><span class="id" title="notation">::</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#z"><span class="id" title="variable">z</span></a>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a><br/>
&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="AC.set_pos_trecE"><span class="id" title="lemma">set_pos_trecE</span></a> <span class="id" title="var">f</span> <span class="id" title="var">z</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.set_pos_trec"><span class="id" title="definition">set_pos_trec</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#z"><span class="id" title="variable">z</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.unzip"><span class="id" title="definition">unzip</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#z"><span class="id" title="variable">z</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.set_pos"><span class="id" title="definition">set_pos</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a>).<br/>
 
<br/>
<span class="id" title="keyword">Definition</span> <a name="AC.eval"><span class="id" title="definition">eval</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.env"><span class="id" title="inductive">env</span></a>) := <span class="id" title="keyword">fix</span> <span class="id" title="var">loop</span> (<span class="id" title="var">s</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.syntax"><span class="id" title="inductive">syntax</span></a>) :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">n</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.pos"><span class="id" title="definition">pos</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Op"><span class="id" title="constructor">Op</span></a> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval.op"><span class="id" title="variable">op</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s"><span class="id" title="variable">s</span></a>) (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> <span class="id" title="var">s'</span>)<br/>
<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval"><span class="id" title="section">eval</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="AC.content"><span class="id" title="definition">content</span></a> := (<span class="id" title="keyword">fix</span> <span class="id" title="var">loop</span> (<span class="id" title="var">acc</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.env"><span class="id" title="inductive">env</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a>) <span class="id" title="var">s</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">n</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.set_pos_trec"><span class="id" title="definition">set_pos_trec</span></a> 0%<span class="id" title="var">num</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.NArith.BinNat.html#N.succ"><span class="id" title="definition">N.succ</span></a> <a class="idref" href="mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626"><span class="id" title="notation">[::]</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#acc"><span class="id" title="variable">acc</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;| <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Op"><span class="id" title="constructor">Op</span></a> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#loop"><span class="id" title="variable">loop</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#acc"><span class="id" title="variable">acc</span></a> <span class="id" title="var">s'</span>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="AC.count_memE"><span class="id" title="lemma">count_memE</span></a> <span class="id" title="var">x</span> (<span class="id" title="var">t</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.syntax"><span class="id" title="inductive">syntax</span></a>) : <a class="idref" href="mathcomp.ssreflect.seq.html#count_mem"><span class="id" title="abbreviation">count_mem</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.pos"><span class="id" title="definition">pos</span></a> 0%<span class="id" title="var">num</span> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.content"><span class="id" title="definition">content</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#x"><span class="id" title="variable">x</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="AC.cforall"><span class="id" title="definition">cforall</span></a> <span class="id" title="var">N</span> <span class="id" title="var">T</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.env"><span class="id" title="inductive">env</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#N"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">â†’</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.env"><span class="id" title="inductive">env</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">â†’</span></a> <span class="id" title="keyword">Type</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">â†’</span></a> <span class="id" title="keyword">Type</span> := <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.env_rect"><span class="id" title="definition">env_rect</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrfun.html#5cbd6ae91bf17c0262dd6b8ac77aca7b"><span class="id" title="notation">@^~</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Empty"><span class="id" title="constructor">Empty</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">e</span> <span class="id" title="var">IHe</span> <span class="id" title="var">e'</span> <span class="id" title="var">IHe'</span> <span class="id" title="var">R</span> â‡’ <span class="id" title="keyword">âˆ€</span> <span class="id" title="var">x</span>, <a class="idref" href="mathcomp.ssreflect.ssrAC.html#IHe"><span class="id" title="variable">IHe</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">xe</span> â‡’ <a class="idref" href="mathcomp.ssreflect.ssrAC.html#IHe'"><span class="id" title="variable">IHe'</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e"><span class="id" title="notation">o</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.ENode"><span class="id" title="constructor">ENode</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#xe"><span class="id" title="variable">xe</span></a>))).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="AC.cforallP"><span class="id" title="lemma">cforallP</span></a> <span class="id" title="var">N</span> <span class="id" title="var">T</span> <span class="id" title="var">R</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><span class="id" title="keyword">âˆ€</span> <span class="id" title="var">e</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.env"><span class="id" title="inductive">env</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#T"><span class="id" title="variable">T</span></a>, <a class="idref" href="mathcomp.ssreflect.ssrAC.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">â†’</span></a> <span class="id" title="keyword">âˆ€</span> (<span class="id" title="var">e</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.env"><span class="id" title="inductive">env</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#N"><span class="id" title="variable">N</span></a>), <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.cforall"><span class="id" title="definition">cforall</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#R"><span class="id" title="variable">R</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="AC.eq_eval"><span class="id" title="section">eq_eval</span></a>.<br/>
<span class="id" title="keyword">Variables</span> (<a name="AC.eq_eval.T"><span class="id" title="variable">T</span></a> : <span class="id" title="keyword">Type</span>) (<a name="AC.eq_eval.idx"><span class="id" title="variable">idx</span></a> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#T"><span class="id" title="variable">T</span></a>) (<a name="AC.eq_eval.op"><span class="id" title="variable">op</span></a> : <a class="idref" href="mathcomp.ssreflect.bigop.html#Monoid.com_law"><span class="id" title="record">Monoid.com_law</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#idx"><span class="id" title="variable">idx</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="AC.proof"><span class="id" title="lemma">proof</span></a> (<span class="id" title="var">p</span> <span class="id" title="var">s</span> : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.syntax"><span class="id" title="inductive">syntax</span></a>) : <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.content"><span class="id" title="definition">content</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.content"><span class="id" title="definition">content</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">â†’</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">âˆ€</span> <span class="id" title="var">env</span>, <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval"><span class="id" title="definition">eval</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eq_eval.idx"><span class="id" title="variable">idx</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eq_eval.op"><span class="id" title="variable">op</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eval"><span class="id" title="definition">eval</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eq_eval.idx"><span class="id" title="variable">idx</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eq_eval.op"><span class="id" title="variable">op</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s"><span class="id" title="variable">s</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="AC.direct"><span class="id" title="definition">direct</span></a> <span class="id" title="var">p</span> <span class="id" title="var">s</span> <span class="id" title="var">ps</span> := <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.cforallP"><span class="id" title="lemma">cforallP</span></a> (@<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.proof"><span class="id" title="lemma">proof</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#ps"><span class="id" title="variable">ps</span></a>) (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.content"><span class="id" title="definition">content</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#p"><span class="id" title="variable">p</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.eq_eval"><span class="id" title="section">eq_eval</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="AC.Exports"><span class="id" title="module">Exports</span></a>.<br/>
<span class="id" title="keyword">Export</span> <span class="id" title="var">AC.Syntax</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC.Exports"><span class="id" title="module">Exports</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC"><span class="id" title="module">AC</span></a>.<br/>
<span class="id" title="keyword">Export</span> <span class="id" title="var">AC.Exports</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="AC_check_pattern"><span class="id" title="abbreviation">AC_check_pattern</span></a> :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">ltac</span>: (<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <a class="idref" href="mathcomp.ssreflect.ssrAC.html#content"><span class="id" title="definition">AC.content</span></a> ?<span class="id" title="var">pat</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#content"><span class="id" title="definition">AC.content</span></a> ?<span class="id" title="var">ord</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">pat'</span> := <span class="id" title="tactic">fresh</span> "pat" <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <span class="id" title="var">pat'</span> := <span class="id" title="tactic">eval</span> <span class="id" title="tactic">compute</span> <span class="id" title="tactic">in</span> <span class="id" title="var">pat</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tryif</span> <span class="id" title="var">unify</span> <span class="id" title="var">pat'</span> <span class="id" title="var">ord</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fail</span> 1 "AC: equality between" <span class="id" title="var">pat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"and" <span class="id" title="var">ord</span> "is trivial, cannot progress"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">tryif</span> <span class="id" title="keyword">vm_compute</span>; <span class="id" title="tactic">reflexivity</span> <span class="id" title="keyword">then</span> <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="tactic">fail</span> 2 "AC: mismatch between shape" <span class="id" title="var">pat</span> "=" <span class="id" title="var">pat'</span> "and reordering" <span class="id" title="var">ord</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- ?<span class="id" title="var">G</span> â‡’ <span class="id" title="tactic">fail</span> 3 "AC: no pattern to check" <span class="id" title="var">G</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>)).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="opACof"><span class="id" title="abbreviation">opACof</span></a> <span class="id" title="var">law</span> <span class="id" title="var">p</span> <span class="id" title="var">s</span> :=<br/>
((<span class="id" title="keyword">fun</span> <span class="id" title="var">T</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span> <span class="id" title="var">assoc</span> <span class="id" title="var">lid</span> <span class="id" title="var">rid</span> <span class="id" title="var">comm</span> â‡’ (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#change_type"><span class="id" title="definition">change_type</span></a> (@<a class="idref" href="mathcomp.ssreflect.ssrAC.html#direct"><span class="id" title="definition">AC.direct</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#idx"><span class="id" title="variable">idx</span></a><br/>
&nbsp;&nbsp;&nbsp;(@<a class="idref" href="mathcomp.ssreflect.bigop.html#Monoid.ComLaw"><span class="id" title="constructor">Monoid.ComLaw</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (@<a class="idref" href="mathcomp.ssreflect.bigop.html#Monoid.Law"><span class="id" title="constructor">Monoid.Law</span></a> <span class="id" title="var">_</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#idx"><span class="id" title="variable">idx</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#assoc"><span class="id" title="variable">assoc</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#lid"><span class="id" title="variable">lid</span></a> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#rid"><span class="id" title="variable">rid</span></a>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#comm"><span class="id" title="variable">comm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">p</span>%<span class="id" title="var">AC</span> <span class="id" title="var">s</span>%<span class="id" title="var">AC</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC_check_pattern"><span class="id" title="abbreviation">AC_check_pattern</span></a>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#cbvrefl"><span class="id" title="abbreviation">cbvrefl</span></a>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">law</span><br/>
(<a class="idref" href="mathcomp.ssreflect.bigop.html#Monoid.mulmA"><span class="id" title="lemma">Monoid.mulmA</span></a> <span class="id" title="var">_</span>) (<a class="idref" href="mathcomp.ssreflect.bigop.html#Monoid.mul1m"><span class="id" title="lemma">Monoid.mul1m</span></a> <span class="id" title="var">_</span>) (<a class="idref" href="mathcomp.ssreflect.bigop.html#Monoid.mulm1"><span class="id" title="lemma">Monoid.mulm1</span></a> <span class="id" title="var">_</span>) (<a class="idref" href="mathcomp.ssreflect.bigop.html#Monoid.mulmC"><span class="id" title="lemma">Monoid.mulmC</span></a> <span class="id" title="var">_</span>)).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="opAC"><span class="id" title="abbreviation">opAC</span></a> <span class="id" title="var">op</span>  <span class="id" title="var">p</span> <span class="id" title="var">s</span> := (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#opACof"><span class="id" title="abbreviation">opACof</span></a> <span class="id" title="var">op</span> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#pattern"><span class="id" title="definition">AC.pattern</span></a> <span class="id" title="var">p</span>%<span class="id" title="var">AC</span>) <span class="id" title="var">s</span>%<span class="id" title="var">AC</span>).<br/>
<span class="id" title="keyword">Notation</span> <a name="opACl"><span class="id" title="abbreviation">opACl</span></a> <span class="id" title="var">op</span> <span class="id" title="var">s</span> := (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#opAC"><span class="id" title="abbreviation">opAC</span></a> <span class="id" title="var">op</span> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#Leaf_of_nat"><span class="id" title="definition">AC.Leaf_of_nat</span></a> (<a class="idref" href="mathcomp.ssreflect.seq.html#size"><span class="id" title="definition">size</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#serial"><span class="id" title="definition">AC.serial</span></a> <span class="id" title="var">s</span>%<span class="id" title="var">AC</span>))) <span class="id" title="var">s</span>%<span class="id" title="var">AC</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="d5b362bb263df4c06f57ddab0f11d787"><span class="id" title="notation">&quot;</span></a>op .[ 'ACof' p s ]" := (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#opACof"><span class="id" title="abbreviation">opACof</span></a> <span class="id" title="var">op</span> <span class="id" title="var">p</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2, <span class="id" title="var">p</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> <a name="5610dbefbe38cb038fc83c1dcacfaf9f"><span class="id" title="notation">&quot;</span></a>op .[ 'AC' p s ]" := (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#opAC"><span class="id" title="abbreviation">opAC</span></a> <span class="id" title="var">op</span> <span class="id" title="var">p</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2, <span class="id" title="var">p</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> <a name="18a583758e6a1c26a136b9df06e666bf"><span class="id" title="notation">&quot;</span></a>op .[ 'ACl' s ]" := (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#opACl"><span class="id" title="abbreviation">opACl</span></a> <span class="id" title="var">op</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="AC_strategy"><span class="id" title="abbreviation">AC_strategy</span></a> :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">ltac</span>: (<span class="id" title="tactic">cbv</span> -[<a class="idref" href="mathcomp.ssreflect.bigop.html#Monoid.com_operator"><span class="id" title="projection">Monoid.com_operator</span></a> <a class="idref" href="mathcomp.ssreflect.bigop.html#Monoid.operator"><span class="id" title="projection">Monoid.operator</span></a>]; <span class="id" title="tactic">reflexivity</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a name="ACof"><span class="id" title="abbreviation">ACof</span></a> <span class="id" title="var">p</span> <span class="id" title="var">s</span> := (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#change_type"><span class="id" title="definition">change_type</span></a><br/>
&nbsp;&nbsp;(@<a class="idref" href="mathcomp.ssreflect.ssrAC.html#direct"><span class="id" title="definition">AC.direct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>  <span class="id" title="var">p</span>%<span class="id" title="var">AC</span> <span class="id" title="var">s</span>%<span class="id" title="var">AC</span> <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC_check_pattern"><span class="id" title="abbreviation">AC_check_pattern</span></a>) <a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC_strategy"><span class="id" title="abbreviation">AC_strategy</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a name="AC"><span class="id" title="abbreviation">AC</span></a> <span class="id" title="var">p</span> <span class="id" title="var">s</span> := (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#ACof"><span class="id" title="abbreviation">ACof</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#pattern"><span class="id" title="definition">AC.pattern</span></a> <span class="id" title="var">p</span>%<span class="id" title="var">AC</span>) <span class="id" title="var">s</span>%<span class="id" title="var">AC</span>).<br/>
<span class="id" title="keyword">Notation</span> <a name="ACl"><span class="id" title="abbreviation">ACl</span></a> <span class="id" title="var">s</span> := (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#AC"><span class="id" title="abbreviation">AC</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#Leaf_of_nat"><span class="id" title="definition">AC.Leaf_of_nat</span></a> (<a class="idref" href="mathcomp.ssreflect.seq.html#size"><span class="id" title="definition">size</span></a> (<a class="idref" href="mathcomp.ssreflect.ssrAC.html#serial"><span class="id" title="definition">AC.serial</span></a> <span class="id" title="var">s</span>%<span class="id" title="var">AC</span>))) <span class="id" title="var">s</span>%<span class="id" title="var">AC</span>).<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>