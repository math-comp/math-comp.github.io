
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.analysis.signed</title>
<meta name="description" content="Documentation of Coq module mathcomp.analysis.signed" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">
<h1 class="title">Module mathcomp.analysis.signed</h1>
<div class="coq">
<span class="vernacular">From</span> <span class="id">Coq</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html">ssreflect</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html">ssrfun</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html">ssrbool</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.ssrnat.html">ssrnat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.eqtype.html">eqtype</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.choice.html">choice</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html">order</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssralg.html">ssralg</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html">ssrnum</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrint.html">ssrint</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html">mathcomp_extra</a></span>.<br/>
<br/>
<div class="ssrdoc md">
# Positive, non-negative numbers, etc.                                     
                                                                           
This file develops tools to make the manipulation of numbers with a known  
sign easier, thanks to canonical structures. This adds types like          
{posnum R} for positive values in R, a notation e%:pos that infers the     
positivity of expression e according to existing canonical instances and   
%:num to cast back from type {posnum R} to R.                              
For instance, given x, y : {posnum R}, we have                             
((x%:num + y%:num) / 2)%:pos : {posnum R} automatically inferred.          
                                                                           
## Types for values with known sign                                        
```                                                                        
   {posnum R} == interface type for elements in R that are positive; R     
                 must have a zmodType structure.                           
                 Allows to solve automatically goals of the form x &gt; 0 if  
                 x is canonically a {posnum R}. {posnum R} is canonically  
                 stable by common operations. All positive natural numbers 
                 ((n.+1)%:R) are also canonically in {posnum R}            
   {nonneg R} == interface types for elements in R that are non-negative;  
                 R must have a zmodType structure. Automatically solves    
                 goals of the form x &gt;= 0. {nonneg R} is stable by         
                 common operations. All natural numbers n%:R are also      
                 canonically in {nonneg R}.                                
{compare x0 &amp; nz &amp; cond} == more generic type of values comparing to       
                 x0 : T according to nz and cond (see below). T must have  
                 a porderType structure. This type is shown to be a        
                 porderType. It is also an orderTpe, as soon as T is a     
                 numDomainType.                                            
{num R &amp; nz &amp; cond} == {compare 0%R : R &amp; nz &amp; cond}. T must have a        
                 zmodType structure.                                       
       {= x0} == {compare x0 &amp; ?=0 &amp; =0}                                   
   {= x0 : T} == same with an explicit type T                              
       {&gt; x0} == {compare x0 &amp; !=0 &amp; &gt;=0}                                  
   {&gt; x0 : T} == same with an explicit type T                              
       {&lt; x0} == {compare x0 &amp; !=0 &amp; &lt;=0}                                  
   {&lt; x0 : T} == same with an explicit type T                              
      {&gt;= x0} == {compare x0 &amp; ?=0 &amp; &gt;=0}                                  
  {&gt;= x0 : T} == same with an explicit type T                              
      {&lt;= x0} == {compare x0 &amp; ?=0 &amp; &lt;=0}                                  
  {&lt;= x0 : T} == same with an explicit type T                              
     {&gt;=&lt; x0} == {compare x0 &amp; ?=0 &amp; &gt;=&lt;0}                                 
 {&gt;=&lt; x0 : T} == same with an explicit type T                              
      {&gt;&lt; x0} == {compare x0 &amp; !=0 &amp; &gt;=&lt;0}                                 
  {&gt;&lt; x0 : T} == same with an explicit type T                              
      {!= x0} == {compare x0 &amp; !=0 &amp; &gt;?&lt;0}                                 
  {!= x0 : T} == same with an explicit type T                              
      {?= x0} == {compare x0 &amp; ?=0 &amp; &gt;?&lt;0}                                 
  {?= x0 : T} == same with an explicit type T                              
```                                                                        
                                                                           
## Casts from/to values with known sign                                    
```                                                                        
       x%:pos == explicitly casts x to {posnum R}, triggers the inference  
                 of a {posnum R} structure for x.                          
       x%:nng == explicitly casts x to {nonneg R}, triggers the inference  
                 of a {nonneg R} structure for x.                          
       x%:sgn == explicitly casts x to the most precise known              
                 {compare x0 &amp; nz &amp; cond} according to existing canonical  
                 instances.                                                
       x%:num == explicit cast from {compare x0 &amp; nz &amp; cond} to R. In      
                 particular this works from {posnum R} and {nonneg R} to R.
    x%:posnum == explicit cast from {posnum R} to R.                       
    x%:nngnum == explicit cast from {nonneg R} to R.                       
```                                                                        
                                                                           
## Nullity conditions nz                                                   
All nz above can be the following (in scope snum_nullity_scope delimited   
by %snum_nullity)                                                          
```                                                                        
          !=0 == to encode x != 0                                          
          ?=0 == unknown nullity                                           
```                                                                        
                                                                           
## Reality conditions cond                                                 
All cond above can be the following (in scope snum_sign_scope delimited by 
by %snum_sign)                                                             
```                                                                        
           =0 == to encode x == 0                                          
          &gt;=0 == to encode x &gt;= 0                                          
          &lt;=0 == to encode x &lt;= 0                                          
         &gt;=&lt;0 == to encode x &gt;=&lt; 0                                         
         &gt;?&lt;0 == unknown reality                                           
```                                                                        
                                                                           
## Sign proofs                                                             
```                                                                        
   [sgn of x] == proof that x is of sign inferred by x%:sgn                
   [gt0 of x] == proof that x &gt; 0                                          
   [lt0 of x] == proof that x &lt; 0                                          
   [ge0 of x] == proof that x &gt;= 0                                         
   [le0 of x] == proof that x &lt;= 0                                         
  [cmp0 of x] == proof that 0 &gt;=&lt; x                                        
  [neq0 of x] == proof that x != 0                                         
```                                                                        
                                                                           
## Constructors                                                            
```                                                                        
  PosNum xgt0 == builds a {posnum R} from a proof xgt0 : x &gt; 0 where x : R 
  NngNum xge0 == builds a {posnum R} from a proof xgt0 : x &gt;= 0 where x : R
  Signed.mk p == builds a {compare x0 &amp; nz &amp; cond} from a proof p that     
                 some x satisfies sign conditions encoded by nz and cond   
```                                                                        
                                                                           
## Misc.                                                                   
```                                                                        
         !! x == triggers pretyping to fill the holes of the term x. The   
                 main use case is to trigger typeclass inference in the    
                 body of a ssreflect have := !! body.                      
                 Credits: Enrico Tassi.                                    
```                                                                        
                                                                           
A number of canonical instances are provided for common operations, if     
your favorite operator is missing, look below for examples on how to add   
the appropriate Canonical.                                                 
                                                                           
Canonical instances are also provided according to types, as a             
fallback when no known operator appears in the expression. Look to         
nat_snum below for an example on how to add your favorite type.            
</div>
<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;'compare'&nbsp;x0&nbsp;&amp;&nbsp;nz&nbsp;&amp;&nbsp;cond&nbsp;}"</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">0,</span> <span class="id">x0</span> <span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">200,</span> <span class="id">nz</span> <span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">200,</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">format</span> <span class="id">"{&nbsp;'compare'&nbsp;&nbsp;x0&nbsp;&nbsp;&amp;&nbsp;&nbsp;nz&nbsp;&nbsp;&amp;&nbsp;&nbsp;cond&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;'num'&nbsp;R&nbsp;&amp;&nbsp;nz&nbsp;&amp;&nbsp;cond&nbsp;}"</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">0,</span> <span class="id">R</span> <span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">200,</span> <span class="id">nz</span> <span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">200,</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">format</span> <span class="id">"{&nbsp;'num'&nbsp;&nbsp;R&nbsp;&nbsp;&amp;&nbsp;&nbsp;nz&nbsp;&nbsp;&amp;&nbsp;&nbsp;cond&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;=&nbsp;x0&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;=&nbsp;&nbsp;x0&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;&nbsp;x0&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;&gt;&nbsp;&nbsp;x0&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;&lt;&nbsp;x0&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;&lt;&nbsp;&nbsp;x0&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;=&nbsp;x0&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;&gt;=&nbsp;&nbsp;x0&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;&lt;=&nbsp;x0&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;&lt;=&nbsp;&nbsp;x0&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;=&lt;&nbsp;x0&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;&gt;=&lt;&nbsp;&nbsp;x0&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;&lt;&nbsp;x0&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;&gt;&lt;&nbsp;&nbsp;x0&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;!=&nbsp;x0&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;!=&nbsp;&nbsp;x0&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;?=&nbsp;x0&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;?=&nbsp;&nbsp;x0&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;=&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;=&nbsp;&nbsp;x0&nbsp;&nbsp;:&nbsp;&nbsp;T&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;&gt;&nbsp;&nbsp;x0&nbsp;&nbsp;:&nbsp;&nbsp;T&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;&lt;&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;&lt;&nbsp;&nbsp;x0&nbsp;&nbsp;:&nbsp;&nbsp;T&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;=&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;&gt;=&nbsp;&nbsp;x0&nbsp;&nbsp;:&nbsp;&nbsp;T&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;&lt;=&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;&lt;=&nbsp;&nbsp;x0&nbsp;&nbsp;:&nbsp;&nbsp;T&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;=&lt;&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;&gt;=&lt;&nbsp;&nbsp;x0&nbsp;&nbsp;:&nbsp;&nbsp;T&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;&lt;&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;&gt;&lt;&nbsp;&nbsp;x0&nbsp;&nbsp;:&nbsp;&nbsp;T&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;!=&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;!=&nbsp;&nbsp;x0&nbsp;&nbsp;:&nbsp;&nbsp;T&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;?=&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;?=&nbsp;&nbsp;x0&nbsp;&nbsp;:&nbsp;&nbsp;T&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"=0"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"=0"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"&gt;=0"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"&gt;=0"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"&lt;=0"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"&lt;=0"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"&gt;=&lt;0"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"&gt;=&lt;0"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"&gt;?&lt;0"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"&gt;?&lt;0"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"!=0"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"!=0"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"?=0"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"?=0"</span>).<br/>
<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:sgn"&nbsp;(at&nbsp;level&nbsp;2,&nbsp;format&nbsp;"x&nbsp;%:sgn"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:num"&nbsp;(at&nbsp;level&nbsp;2,&nbsp;format&nbsp;"x&nbsp;%:num"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:posnum"&nbsp;(at&nbsp;level&nbsp;2,&nbsp;format&nbsp;"x&nbsp;%:posnum"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:nngnum"&nbsp;(at&nbsp;level&nbsp;2,&nbsp;format&nbsp;"x&nbsp;%:nngnum"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"[&nbsp;'sgn'&nbsp;'of'&nbsp;x&nbsp;]"&nbsp;(format&nbsp;"[&nbsp;'sgn'&nbsp;'of'&nbsp;&nbsp;x&nbsp;]"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"[&nbsp;'gt0'&nbsp;'of'&nbsp;x&nbsp;]"&nbsp;(format&nbsp;"[&nbsp;'gt0'&nbsp;'of'&nbsp;&nbsp;x&nbsp;]"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"[&nbsp;'lt0'&nbsp;'of'&nbsp;x&nbsp;]"&nbsp;(format&nbsp;"[&nbsp;'lt0'&nbsp;'of'&nbsp;&nbsp;x&nbsp;]"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"[&nbsp;'ge0'&nbsp;'of'&nbsp;x&nbsp;]"&nbsp;(format&nbsp;"[&nbsp;'ge0'&nbsp;'of'&nbsp;&nbsp;x&nbsp;]"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"[&nbsp;'le0'&nbsp;'of'&nbsp;x&nbsp;]"&nbsp;(format&nbsp;"[&nbsp;'le0'&nbsp;'of'&nbsp;&nbsp;x&nbsp;]"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"[&nbsp;'cmp0'&nbsp;'of'&nbsp;x&nbsp;]"&nbsp;(format&nbsp;"[&nbsp;'cmp0'&nbsp;'of'&nbsp;&nbsp;x&nbsp;]"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"[&nbsp;'neq0'&nbsp;'of'&nbsp;x&nbsp;]"&nbsp;(format&nbsp;"[&nbsp;'neq0'&nbsp;'of'&nbsp;&nbsp;x&nbsp;]"</span>).<br/>
<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;'posnum'&nbsp;R&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;'posnum'&nbsp;&nbsp;R&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{&nbsp;'nonneg'&nbsp;R&nbsp;}"&nbsp;(at&nbsp;level&nbsp;0,&nbsp;format&nbsp;"{&nbsp;'nonneg'&nbsp;&nbsp;R&nbsp;}"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:pos"&nbsp;(at&nbsp;level&nbsp;2,&nbsp;format&nbsp;"x&nbsp;%:pos"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:nng"&nbsp;(at&nbsp;level&nbsp;2,&nbsp;format&nbsp;"x&nbsp;%:nng"</span>).<br/>
<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"!!&nbsp;x"</span> (<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">100,</span> <span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="gallina-kwd">Set</span> <span class="vernacular">Implicit</span> <span class="vernacular">Arguments</span>.<br/>
<span class="id">Unset</span> <span class="id">Strict</span> <span class="vernacular">Implicit</span>.<br/>
<span class="id">Unset</span> <span class="id">Printing</span> <span class="vernacular">Implicit</span> <span class="id">Defensive</span>.<br/>
<span class="vernacular">Import</span> <span class="id">Order.TTheory</span> <span class="id">Order.Syntax</span>.<br/>
<span class="vernacular">Import</span> <span class="id">GRing.Theory</span> <span class="id">Num.Theory</span>.<br/>
<br/>
<span class="id">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">ring_scope</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">order_scope</span>.<br/>
<br/>
<span class="id">Declare</span> <span class="vernacular">Scope</span> <span class="id">snum_scope</span>.<br/>
<span class="id">Delimit</span> <span class="vernacular">Scope</span> <span class="id">snum_scope</span> <span class="gallina-kwd">with</span> <span class="id">snum</span>.<br/>
<span class="id">Declare</span> <span class="vernacular">Scope</span> <span class="id">snum_sign_scope</span>.<br/>
<span class="id">Delimit</span> <span class="vernacular">Scope</span> <span class="id">snum_sign_scope</span> <span class="gallina-kwd">with</span> <span class="id">snum_sign</span>.<br/>
<span class="id">Declare</span> <span class="vernacular">Scope</span> <span class="id">snum_nullity_scope</span>.<br/>
<span class="id">Delimit</span> <span class="vernacular">Scope</span> <span class="id">snum_nullity_scope</span> <span class="gallina-kwd">with</span> <span class="id">snum_nullity</span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span class="id">"!!&nbsp;x"</span> <span class="id">:=</span> (<span class="id">ltac:</span>(<span class="id">refine</span> <span class="id">x</span>)) (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<span class="vernacular">Class</span> <span class="id">infer</span> (<span class="id">P</span> <span id="P:1" class="id">
  <a name="P:1" class="">:</a>
</span> <span class="gallina-kwd">Prop</span>) <span class="id">:=</span> <span class="id">Infer</span> <span class="id">:</span> <span class="id">P</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Mode</span> <span class="id">infer</span> <span class="id">!</span> <span class="id">:</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id">infer</span> <span class="id">_</span>) <span class="id">=&gt;</span> (<span class="id">exact</span>) <span class="id">:</span> <span class="id">typeclass_instances</span>.<br/>
<span class="vernacular">Lemma</span> <span class="id">inferP</span> (<span class="id">P</span> <span id="P:4" class="id">
  <a name="P:4" class="">:</a>
</span> <span class="gallina-kwd">Prop</span>) <span class="id">:</span> <span class="id">P</span> <span class="id"><a href="mathcomp.analysis.signed.html#P:4">-&gt;</a></span> <span class="id">infer</span> <span class="id">P</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Module</span> <span class="vernacular">Import</span> <span class="id">KnownSign</span>.<br/>
<span class="vernacular">Variant</span> <span class="id">nullity</span> <span class="id">:=</span> <span class="id">NonZero</span> <span class="id">|</span> <span class="id">MaybeZero</span>.<br/>
<span class="vernacular">Coercion</span> <span class="id">nullity_bool</span> <span class="id">nz</span> <span class="id">:=</span> <span class="gallina-kwd">if</span> <span class="id">nz</span> <span class="id">is</span> <span class="id">NonZero</span> <span class="gallina-kwd">then</span> <span class="id">true</span> <span class="gallina-kwd">else</span> <span class="id">false</span>.<br/>
<span class="vernacular">Definition</span> <span class="id">nz_of_bool</span> <span class="id">b</span> <span id="b:9" class="id">
  <a name="b:9" class="">:=</a>
</span> <span class="gallina-kwd">if</span> <span class="id">b</span> <span class="gallina-kwd">then</span> <span class="id">NonZero</span> <span class="gallina-kwd">else</span> <span class="id">MaybeZero</span>.<br/>
<br/>
<span class="vernacular">Variant</span> <span class="id">sign</span> <span class="id">:=</span> <span class="id">EqZero</span> <span class="id">|</span> <span class="id">NonNeg</span> <span class="id">|</span> <span class="id">NonPos</span>.<br/>
<span class="vernacular">Variant</span> <span class="id">real</span> <span class="id">:=</span> <span class="id">Sign</span> <span class="id">of</span> <span class="id">sign</span> <span class="id">|</span> <span class="id">AnySign</span>.<br/>
<span class="vernacular">Variant</span> <span class="id">reality</span> <span class="id">:=</span> <span class="id">Real</span> <span class="id">of</span> <span class="id">real</span> <span class="id">|</span> <span class="id">Arbitrary</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">wider_nullity</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xnz,</span> <span class="id">ynz</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">MaybeZero,</span> <span class="id">_</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">NonZero,</span> <span class="id">NonZero</span> <span class="id">=&gt;</span> <span class="id">true</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">NonZero,</span> <span class="id">MaybeZero</span> <span class="id">=&gt;</span> <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<span class="vernacular">Definition</span> <span class="id">wider_sign</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xs,</span> <span class="id">ys</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">NonNeg,</span> <span class="id">NonNeg</span> <span class="id">|</span> <span class="id">NonNeg,</span> <span class="id">EqZero</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">NonPos,</span> <span class="id">NonPos</span> <span class="id">|</span> <span class="id">NonPos,</span> <span class="id">EqZero</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">EqZero,</span> <span class="id">EqZero</span> <span class="id">=&gt;</span> <span class="id">true</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">NonNeg,</span> <span class="id">NonPos</span> <span class="id">|</span> <span class="id">NonPos,</span> <span class="id">NonNeg</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">EqZero,</span> <span class="id">NonPos</span> <span class="id">|</span> <span class="id">EqZero,</span> <span class="id">NonNeg</span> <span class="id">=&gt;</span> <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<span class="vernacular">Definition</span> <span class="id">wider_real</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xr,</span> <span class="id">yr</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">AnySign,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">true</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Sign</span> <span class="id">sx,</span> <span class="id">Sign</span> <span class="id">sy</span> <span class="id">=&gt;</span> <span class="id">wider_sign</span> <span class="id">sx</span> <span class="id">sy</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Sign</span> <span class="id">_,</span> <span class="id">AnySign</span> <span class="id">=&gt;</span> <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<span class="vernacular">Definition</span> <span class="id">wider_reality</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xr,</span> <span class="id">yr</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Arbitrary,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">true</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> <span class="id">xr,</span> <span class="id">Real</span> <span class="id">yr</span> <span class="id">=&gt;</span> <span class="id">wider_real</span> <span class="id">xr</span> <span class="id">yr</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> <span class="id">_,</span> <span class="id">Arbitrary</span> <span class="id">=&gt;</span> <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<span class="vernacular">End</span> <span class="id">KnownSign</span>.<br/>
<br/>
<span class="vernacular">Module</span> <span class="id">Signed</span>.<br/>
<span class="vernacular">Section</span> <span class="id">Signed</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">disp</span> <span class="id">:</span> <span class="id">unit</span>) (<span class="id">T</span> <span id="T:33" class="id">
  <a name="T:33" class="">:</a>
</span> <span class="id">porderType</span> <span class="id">disp</span>) (<span class="id">x0</span> <span class="id">:</span> <span class="id">T</span>).<br/>
<br/>
<span class="id">Local</span> <span class="vernacular">Coercion</span> <span class="id">is_real</span> <span class="id">r</span> <span id="r:35" class="id">
  <a name="r:35" class="">:=</a>
</span> <span class="gallina-kwd">if</span> <span class="id">r</span> <span class="id">is</span> <span class="id">Real</span> <span class="id">_</span> <span class="gallina-kwd">then</span> <span class="id">true</span> <span class="gallina-kwd">else</span> <span class="id">false</span>.<br/>
<span class="vernacular">Definition</span> <span class="id">reality_cond</span> (<span class="id">n</span> <span id="n:37" class="id">
  <a name="n:37" class="">:</a>
</span> <span class="id">reality</span>) (<span class="id">x</span> <span id="x:38" class="id">
  <a name="x:38" class="">:</a>
</span> <span class="id">T</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">n</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">EqZero</span>) <span class="id">=&gt;</span> <span class="id">x</span> <span class="id"><a href="mathcomp.analysis.signed.html#x:38">==</a></span> <span class="id">x0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">NonNeg</span>) <span class="id">=&gt;</span> <span class="id">x</span> <span class="id"><a href="mathcomp.analysis.signed.html#x:38">&gt;=</a></span> <span class="id">x0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">NonPos</span>) <span class="id">=&gt;</span> <span class="id">x</span> <span class="id"><a href="mathcomp.analysis.signed.html#x:38">&lt;=</a></span> <span class="id">x0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> <span class="id">AnySign</span>       <span class="id">=&gt;</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">x0</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<='_x">&lt;=</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">||</a></span> (<span class="id">x</span> <span class="id"><a href="mathcomp.analysis.signed.html#x:38">&lt;=</a></span> <span class="id">x0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Arbitrary</span>          <span class="id">=&gt;</span> <span class="id">true</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Record</span> <span class="id">def</span> (<span class="id">nz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">cond</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:=</span> <span class="id">Def</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span class="id">r</span> <span id="Signed.r" class="id">
  <a name="Signed.r" class="">:&gt;</a>
</span> <span class="id">T;</span><br/>
&nbsp;&nbsp;<span class="id">#[canonical=no]</span><br/>
&nbsp;&nbsp;<span class="id">P</span> <span id="Signed.P" class="id">
  <a name="Signed.P" class="">:</a>
</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">nz</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::bool_scope:x_'==>'_x">==&gt;</a></span> (<span class="id">r</span> <span class="id"><a href="mathcomp.analysis.signed.html#r:43">!=</a></span> <span class="id">x0</span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> <span class="id">reality_cond</span> <span class="id">cond</span> <span class="id">r</span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id">Signed</span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span class="id">spec</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond</span> <span class="id">x</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;((<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">nullity_bool</a></span> <span class="id">nz%snum_nullity</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::bool_scope:x_'==>'_x">==&gt;</a></span> (<span class="id">x</span> <span class="id">!=</span> <span class="id">x0</span>))<br/>
&nbsp;&nbsp;&nbsp;<span class="id">&amp;&amp;</span> (<span class="id">reality_cond</span> <span class="id">x0</span> <span class="id">cond%snum_sign</span> <span class="id">x</span>)).<br/>
<br/>
<span class="vernacular">Record</span> <span class="id">typ</span> <span class="id">d</span> <span class="id">nz</span> <span class="id">cond</span> <span class="id">:=</span> <span class="id">Typ</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span class="id">sort</span> <span class="id">:</span> <span class="id">porderType</span> <span class="id">d;</span><br/>
&nbsp;&nbsp;<span class="id">#[canonical=no]</span><br/>
&nbsp;&nbsp;<span class="id">sort_x0</span> <span class="id">:</span> <span class="id">sort;</span><br/>
&nbsp;&nbsp;<span class="id">#[canonical=no]</span><br/>
&nbsp;&nbsp;<span class="id">allP</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span class="id">x</span> <span id="x:51" class="id">
  <a name="x:51" class="">:</a>
</span> <span class="id">sort,</span> <span class="id">spec</span> <span class="id">sort_x0</span> <span class="id">nz</span> <span class="id">cond</span> <span class="id">x</span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">mk</span> <span class="id">{d</span> <span class="id">T}</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond</span> <span class="id">r</span> <span class="id">P</span> <span id="P:59" class="id">
  <a name="P:59" class="">:</a>
</span> <span class="id">@def</span> <span class="id">d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">@Def</span> <span class="id">d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond</span> <span class="id">r</span> <span class="id">P</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">from</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span><br/>
&nbsp;&nbsp;<span class="id">{x</span> <span id="x:65" class="id">
  <a name="x:65" class="">:</a>
</span> <span class="id">@def</span> <span class="id">d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> (<span class="id">phx</span> <span class="id">:</span> <span class="id">phantom</span> <span class="id">T</span> <span class="id">x</span>) <span class="id">:=</span> <span class="id">x</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">fromP</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span><br/>
&nbsp;&nbsp;<span class="id">{x</span> <span id="x:72" class="id">
  <a name="x:72" class="">:</a>
</span> <span class="id">@def</span> <span class="id">d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> (<span class="id">phx</span> <span class="id">:</span> <span class="id">phantom</span> <span class="id">T</span> <span class="id">x</span>) <span class="id">:=</span> <span class="id">P</span> <span class="id">x</span>.<br/>
<br/>
<span class="vernacular">Module</span> <span class="id">Exports</span>.<br/>
<span class="vernacular">Coercion</span> <span class="id">Sign</span> <span class="id">:</span> <span class="id">sign</span> <span class="id">&gt;-&gt;</span> <span class="id">real</span>.<br/>
<span class="vernacular">Coercion</span> <span class="id">Real</span> <span class="id">:</span> <span class="id">real</span> <span class="id">&gt;-&gt;</span> <span class="id">reality</span>.<br/>
<span class="vernacular">Coercion</span> <span class="id">is_real</span> <span class="id">:</span> <span class="id">reality</span> <span class="id">&gt;-&gt;</span> <span class="id">bool</span>.<br/>
<span class="id">Bind</span> <span class="vernacular">Scope</span> <span class="id">snum_sign_scope</span> <span class="gallina-kwd">with</span> <span class="id">sign</span>.<br/>
<span class="id">Bind</span> <span class="vernacular">Scope</span> <span class="id">snum_sign_scope</span> <span class="gallina-kwd">with</span> <span class="id">reality</span>.<br/>
<span class="id">Bind</span> <span class="vernacular">Scope</span> <span class="id">snum_nullity_scope</span> <span class="gallina-kwd">with</span> <span class="id">nullity</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"=0"</span> <span class="id">:=</span> <span class="id">EqZero</span> <span class="id">:</span> <span class="id">snum_sign_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"&gt;=0"</span> <span class="id">:=</span> <span class="id">NonNeg</span> <span class="id">:</span> <span class="id">snum_sign_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"&lt;=0"</span> <span class="id">:=</span> <span class="id">NonPos</span> <span class="id">:</span> <span class="id">snum_sign_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"&gt;=&lt;0"</span> <span class="id">:=</span> <span class="id">AnySign</span> <span class="id">:</span> <span class="id">snum_sign_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"&gt;?&lt;0"</span> <span class="id">:=</span> <span class="id">Arbitrary</span> <span class="id">:</span> <span class="id">snum_sign_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"!=0"</span> <span class="id">:=</span> <span class="id">NonZero</span> <span class="id">:</span> <span class="id">snum_nullity_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"?=0"</span> <span class="id">:=</span> <span class="id">MaybeZero</span> <span class="id">:</span> <span class="id">snum_nullity_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;'compare'&nbsp;x0&nbsp;&amp;&nbsp;nz&nbsp;&amp;&nbsp;cond&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;'num'&nbsp;R&nbsp;&amp;&nbsp;nz&nbsp;&amp;&nbsp;cond&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> (<span class="id">0%R</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">R</span>) <span class="id">nz</span> <span class="id">cond</span>) <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;=&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> (<span class="id">x0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">T</span>) <span class="id">MaybeZero</span> <span class="id">EqZero</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> (<span class="id">x0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">T</span>) <span class="id">NonZero</span> <span class="id">NonNeg</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;&lt;&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> (<span class="id">x0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">T</span>) <span class="id">NonZero</span> <span class="id">NonPos</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;=&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> (<span class="id">x0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">T</span>) <span class="id">MaybeZero</span> <span class="id">NonNeg</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;&lt;=&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> (<span class="id">x0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">T</span>) <span class="id">MaybeZero</span> <span class="id">NonPos</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;&lt;&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> (<span class="id">x0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">T</span>) <span class="id">NonZero</span> <span class="id">Real</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;=&lt;&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> (<span class="id">x0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">T</span>) <span class="id">MaybeZero</span> <span class="id">Real</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;!=&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> (<span class="id">x0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">T</span>) <span class="id">NonZero</span> <span class="id">Arbitrary</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;?=&nbsp;x0&nbsp;:&nbsp;T&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> (<span class="id">x0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">T</span>) <span class="id">MaybeZero</span> <span class="id">Arbitrary</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;=&nbsp;x0&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> <span class="id">x0</span> <span class="id">MaybeZero</span> <span class="id">EqZero</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;&nbsp;x0&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> <span class="id">x0</span> <span class="id">NonZero</span> <span class="id">NonNeg</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;&lt;&nbsp;x0&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> <span class="id">x0</span> <span class="id">NonZero</span> <span class="id">NonPos</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;=&nbsp;x0&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> <span class="id">x0</span> <span class="id">MaybeZero</span> <span class="id">NonNeg</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;&lt;=&nbsp;x0&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> <span class="id">x0</span> <span class="id">MaybeZero</span> <span class="id">NonPos</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;&lt;&nbsp;x0&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> <span class="id">x0</span> <span class="id">NonZero</span> <span class="id">Real</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;&gt;=&lt;&nbsp;x0&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> <span class="id">x0</span> <span class="id">MaybeZero</span> <span class="id">Real</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;!=&nbsp;x0&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> <span class="id">x0</span> <span class="id">NonZero</span> <span class="id">Arbitrary</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;?=&nbsp;x0&nbsp;}"</span> <span class="id">:=</span> (<span class="id">def</span> <span class="id">x0</span> <span class="id">MaybeZero</span> <span class="id">Arbitrary</span>) <span class="id">:</span> <span class="id">type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:sgn"</span> <span class="id">:=</span> (<span class="id">from</span> (<span class="id">Phantom</span> <span class="id">_</span> <span class="id">x</span>)) <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"[&nbsp;'sgn'&nbsp;'of'&nbsp;x&nbsp;]"</span> <span class="id">:=</span> (<span class="id">fromP</span> (<span class="id">Phantom</span> <span class="id">_</span> <span class="id">x</span>)) <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">num</span> <span class="id">:=</span> <span class="id">r</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:num"</span> <span class="id">:=</span> (<span class="id">r</span> <span class="id">x</span>) <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<span class="vernacular">Definition</span> <span class="id">posnum</span> (<span class="id">R</span> <span id="R:74" class="id">
  <a name="R:74" class="">:</a>
</span> <span class="id">numDomainType</span>) <span class="id">of</span> <span class="id">phant</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#R:74">:=</a></span> <span class="id">{&gt;</span> <span class="id">0%R</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">R}</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;'posnum'&nbsp;R&nbsp;}"</span> <span class="id">:=</span> (<span class="id">@posnum</span> <span class="id">_</span> (<span class="id">Phant</span> <span class="id">R</span>))  <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:posnum"</span> <span class="id">:=</span> (<span class="id">@num</span> <span class="id">_</span> <span class="id">_</span> <span class="id">0%R</span> <span class="id">!=0</span> <span class="id">&gt;=0</span> <span class="id">x</span>) <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<span class="vernacular">Definition</span> <span class="id">nonneg</span> (<span class="id">R</span> <span id="R:75" class="id">
  <a name="R:75" class="">:</a>
</span> <span class="id">numDomainType</span>) <span class="id">of</span> <span class="id">phant</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#R:75">:=</a></span> <span class="id">{&gt;=</span> <span class="id">0%R</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">R}</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"{&nbsp;'nonneg'&nbsp;R&nbsp;}"</span> <span class="id">:=</span> (<span class="id">@nonneg</span> <span class="id">_</span> (<span class="id">Phant</span> <span class="id">R</span>))  <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:nngnum"</span> <span class="id">:=</span> (<span class="id">@num</span> <span class="id">_</span> <span class="id">_</span> <span class="id">0%R</span> <span class="id">?=0</span> <span class="id">&gt;=0</span> <span class="id">x</span>) <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">r</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.r">{disp</a></span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span>.<br/>
<span class="vernacular">End</span> <span class="id">Exports</span>.<br/>
<span class="vernacular">End</span> <span class="id">Signed</span>.<br/>
<span class="vernacular">Export</span> <span class="id">Signed.Exports</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">POrder</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">d</span> <span id="POrder.d" class="id">
  <a name="POrder.d" class="">:</a>
</span> <span class="id">unit</span>) (<span class="id">T</span> <span id="POrder.T" class="id">
  <a name="POrder.T" class="">:</a>
</span> <span class="id">porderType</span> <span class="id">d</span>) (<span class="id">x0</span> <span class="id">:</span> <span class="id">T</span>) (<span class="id">nz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">cond</span> <span class="id">:</span> <span class="id">reality</span>).<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">sT</span> <span class="id">:=</span> <span class="id">{compare</span> <span class="id">x0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">cond}</span>.<br/>
<span class="vernacular">Canonical</span> <span class="id">signed_subType</span> <span class="id">:=</span> <span class="id">[subType</span> <span class="gallina-kwd">for</span> <span class="id">@Signed</span>.<span class="id">r</span> <span class="id">d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond]</span>.<br/>
<span class="vernacular">Definition</span> <span class="id">signed_eqMixin</span> <span class="id">:=</span> <span class="id">[eqMixin</span> <span class="id">of</span> <span class="id">sT</span> <span class="gallina-kwd">by</span> <span class="id">&lt;:]</span>.<br/>
<span class="vernacular">Canonical</span> <span class="id">signed_eqType</span> <span class="id">:=</span> <span class="id">EqType</span> <span class="id">sT</span> <span class="id">signed_eqMixin</span>.<br/>
<span class="vernacular">Definition</span> <span class="id">signed_choiceMixin</span> <span class="id">:=</span> <span class="id">[choiceMixin</span> <span class="id">of</span> <span class="id">sT</span> <span class="gallina-kwd">by</span> <span class="id">&lt;:]</span>.<br/>
<span class="vernacular">Canonical</span> <span class="id">signed_choiceType</span> <span class="id">:=</span> <span class="id">ChoiceType</span> <span class="id">sT</span> <span class="id">signed_choiceMixin</span>.<br/>
<span class="vernacular">Definition</span> <span class="id">signed_porderMixin</span> <span class="id">:=</span> <span class="id">[porderMixin</span> <span class="id">of</span> <span class="id">sT</span> <span class="gallina-kwd">by</span> <span class="id">&lt;:]</span>.<br/>
<span class="vernacular">Canonical</span> <span class="id">signed_porderType</span> <span class="id">:=</span> <span class="id">POrderType</span> <span class="id">d</span> <span class="id">sT</span> <span class="id">signed_porderMixin</span>.<br/>
<span class="vernacular">End</span> <span class="id">POrder</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">top_typ_subproof</span> <span class="id">d</span> (<span class="id">T</span> <span id="T:82" class="id">
  <a name="T:82" class="">:</a>
</span> <span class="id">porderType</span> <span class="id">d</span>) (<span class="id">x0</span> <span class="id">x</span> <span id="x:84" class="id">
  <a name="x:84" class="">:</a>
</span> <span class="id">T</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">x0</span> <span class="id">?=0</span> <span class="id">&gt;?&lt;0</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">top_typ</span> <span class="id">d</span> (<span class="id">T</span> <span id="T:86" class="id">
  <a name="T:86" class="">:</a>
</span> <span class="id">porderType</span> <span class="id">d</span>) (<span class="id">x0</span> <span class="id">:</span> <span class="id">T</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.Typ</span> (<span class="id">top_typ_subproof</span> <span class="id">x0</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">real_domain_typ_subproof</span> (<span class="id">R</span> <span id="R:88" class="id">
  <a name="R:88" class="">:</a>
</span> <span class="id">realDomainType</span>) (<span class="id">x</span> <span id="x:89" class="id">
  <a name="x:89" class="">:</a>
</span> <span class="id">R</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0%R</span> <span class="id">?=0</span> <span class="id">&gt;=&lt;0</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-realE</span> <span class="id">num_real</span>. Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">real_domain_typ</span> (<span class="id">R</span> <span id="R:90" class="id">
  <a name="R:90" class="">:</a>
</span> <span class="id">realDomainType</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.Typ</span> (<span class="id">@real_domain_typ_subproof</span> <span class="id">R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">real_field_typ_subproof</span> (<span class="id">R</span> <span id="R:91" class="id">
  <a name="R:91" class="">:</a>
</span> <span class="id">realFieldType</span>) (<span class="id">x</span> <span id="x:92" class="id">
  <a name="x:92" class="">:</a>
</span> <span class="id">R</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0%R</span> <span class="id">?=0</span> <span class="id">&gt;=&lt;0</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
 <span class="id">exact:</span> <span class="id">real_domain_typ_subproof</span>. Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">real_field_typ</span> (<span class="id">R</span> <span id="R:93" class="id">
  <a name="R:93" class="">:</a>
</span> <span class="id">realFieldType</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.Typ</span> (<span class="id">@real_field_typ_subproof</span> <span class="id">R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">nat_typ_subproof</span> (<span class="id">x</span> <span id="x:94" class="id">
  <a name="x:94" class="">:</a>
</span> <span class="id">nat</span>) <span class="id">:</span> <span class="id">Signed.spec</span> <span class="id">0%N</span> <span class="id">?=0</span> <span class="id">&gt;=0</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">nat_typ</span> <span class="id">:=</span> <span class="id">Signed.Typ</span> <span class="id">nat_typ_subproof</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">typ_snum_subproof</span> <span class="id">d</span> <span class="id">nz</span> <span class="id">cond</span> (<span class="id">xt</span> <span class="id">:</span> <span class="id">Signed.typ</span> <span class="id">d</span> <span class="id">nz</span> <span class="id">cond</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:99" class="id">
  <a name="x:99" class="">:</a>
</span> <span class="id">Signed.sort</span> <span class="id">xt</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> (<span class="id">Signed.sort_x0</span> <span class="id">xt</span>) <span class="id">nz</span> <span class="id">cond</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
 <span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">xt</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[]</span>. Qed.</div>
<br/>
<div class="doc">This adds _ &lt;- Signed.r ( typ_snum )
   to canonical projections (c.f., Print Canonical Projections
   Signed.r) meaning that if no other canonical instance (with a
   registered head symbol) is found, a canonical instance of
   Signed.typ, like the ones above, will be looked for. </div>
<span class="vernacular">Canonical</span> <span class="id">typ_snum</span> <span class="id">d</span> <span class="id">nz</span> <span class="id">cond</span> (<span class="id">xt</span> <span class="id">:</span> <span class="id">Signed.typ</span> <span class="id">d</span> <span class="id">nz</span> <span class="id">cond</span>) (<span class="id">x</span> <span id="x:104" class="id">
  <a name="x:104" class="">:</a>
</span> <span class="id">Signed.sort</span> <span class="id">xt</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">typ_snum_subproof</span> <span class="id">x</span>).<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="vernacular">Class</span> <span class="id">unify</span> <span class="id">{T}</span> <span class="id">f</span> (<span class="id">x</span> <span class="id">y</span> <span id="y:108" class="id">
  <a name="y:108" class="">:</a>
</span> <span class="id">T</span>) <span class="id">:=</span> <span class="id">Unify</span> <span class="id">:</span> <span class="id">f</span> <span class="id">x</span> <span class="id">y</span> <span class="id"><a href="mathcomp.analysis.signed.html#y:108">=</a></span> <span class="id">true</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Mode</span> <span class="id">unify</span> <span class="id">-</span> <span class="id">-</span> <span class="id">-</span> <span class="id">+</span> <span class="id">:</span> <span class="id">typeclass_instances</span>.<br/>
<span class="vernacular">Class</span> <span class="id">unify'</span> <span class="id">{T}</span> <span class="id">f</span> (<span class="id">x</span> <span class="id">y</span> <span id="y:114" class="id">
  <a name="y:114" class="">:</a>
</span> <span class="id">T</span>) <span class="id">:=</span> <span class="id">Unify'</span> <span class="id">:</span> <span class="id">f</span> <span class="id">x</span> <span class="id">y</span> <span class="id"><a href="mathcomp.analysis.signed.html#y:114">=</a></span> <span class="id">true</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Instance</span> <span class="id">unify'P</span> <span class="id">{T}</span> <span class="id">f</span> (<span class="id">x</span> <span class="id">y</span> <span id="y:120" class="id">
  <a name="y:120" class="">:</a>
</span> <span class="id">T</span>) <span class="id">:</span> <span class="id">unify'</span> <span class="id">f</span> <span class="id">x</span> <span class="id">y</span> <span class="id"><a href="mathcomp.analysis.signed.html#y:120">-&gt;</a></span> <span class="id">unify</span> <span class="id">f</span> <span class="id">x</span> <span class="id">y</span> <span class="id"><a href="mathcomp.analysis.signed.html#y:120">:=</a></span> <span class="id">id</span>.<br/>
<span class="id">#[global]</span><br/>
<span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id">unify'</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span> <span class="id">vm_compute;</span> <span class="id">reflexivity</span> <span class="id">:</span> <span class="id">typeclass_instances</span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span class="id">unify_nz</span> <span class="id">nzx</span> <span class="id">nzy</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="id">unify</span> <span class="id">wider_nullity</span> <span class="id">nzx%snum_nullity</span> <span class="id">nzy%snum_nullity</span>).<br/>
<span class="vernacular">Notation</span> <span class="id">unify_r</span> <span class="id">rx</span> <span class="id">ry</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="id">unify</span> <span class="id">wider_reality</span> <span class="id">rx%snum_sign</span> <span class="id">ry%snum_sign</span>).<br/>
<br/>
<span class="id">#[global]</span> <span class="vernacular">Instance</span> <span class="id">anysign_wider_real</span> <span class="id">sign</span> <span class="id">:</span> <span class="id">unify_r</span> (<span class="id">Real</span> <span class="id">AnySign</span>) (<span class="id">Real</span> <span class="id">sign</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="id">#[global]</span> <span class="vernacular">Instance</span> <span class="id">any_reality_wider_eq0</span> <span class="id">cond</span> <span class="id">:</span> <span class="id">unify_r</span> <span class="id">cond</span> <span class="id">=0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
 <span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">cond</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span>. Qed.</div>
<br/>
<span class="vernacular">Section</span> <span class="id">Theory</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{d</span> <span id="d:123" class="id">
  <a name="d:123" class="">:</a>
</span> <span class="id">unit}</span> <span class="id">{T</span> <span id="T:124" class="id">
  <a name="T:124" class="">:</a>
</span> <span class="id">porderType</span> <span class="id">d}</span> <span class="id">{x0</span> <span class="id">:</span> <span class="id">T}</span><br/>
&nbsp;&nbsp;<span class="id">{nz</span> <span class="id">:</span> <span class="id">nullity}</span> <span class="id">{cond</span> <span class="id">:</span> <span class="id">reality}</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">sT</span> <span class="id">:=</span> <span class="id">{compare</span> <span class="id">x0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">cond}</span>.<br/>
<span class="vernacular">Implicit</span> <span class="gallina-kwd">Type</span> <span class="id">x</span> <span class="id">:</span> <span class="id">sT</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">signed_intro</span> <span class="id">{x}</span> <span class="id">:</span> <span class="id">x%:num</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x_':>'_x">=</a></span> <span class="id">x%:num</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x_':>'_x">:&gt;</a></span> <span class="id">T</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">bottom</span> <span class="id">x</span> <span id="x:129" class="id">
  <a name="x:129" class="">:</a>
</span> <span class="id">unify_nz</span> <span class="id">!=0</span> <span class="id">nz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">unify_r</span> <span class="id">=0</span> <span class="id">cond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">False</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[x</span> <span class="id">/=</span> <span class="id">/andP[]];</span> <span class="id">move:</span> <span class="id">cond</span> <span class="id">nz</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">//=</span> <span class="id">/[swap]</span> <span class="id">-&gt;</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">gt0</span> <span class="id">x</span> <span id="x:130" class="id">
  <a name="x:130" class="">:</a>
</span> <span class="id">unify_nz</span> <span class="id">!=0</span> <span class="id">nz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">unify_r</span> <span class="id">&gt;=0</span> <span class="id">cond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">x0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<'_x_':>'_x">&lt;</a></span> <span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<'_x_':>'_x">:&gt;</a></span> <span class="id">T</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
<span class="id">move:</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[x</span> <span class="id">/=</span> <span class="id">/andP[]]</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">cond</span> <span class="id">nz</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">//=;</span> <span class="id">rewrite</span> <span class="id">lt_def</span> <span class="id">=&gt;</span> <span class="id">-&gt;</span> <span class="id">//</span> <span class="id">/eqP</span> <span class="id">-&gt;</span> <span class="id">/=</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">le0F</span> <span class="id">x</span> <span id="x:131" class="id">
  <a name="x:131" class="">:</a>
</span> <span class="id">unify_nz</span> <span class="id">!=0</span> <span class="id">nz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">unify_r</span> <span class="id">&gt;=0</span> <span class="id">cond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<='_x_':>'_x">&lt;=</a></span> <span class="id">x0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<='_x_':>'_x">:&gt;</a></span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.signed.html#Theory.T">=</a></span> <span class="id">false</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">?</span> <span class="id">?;</span> <span class="id">rewrite</span> <span class="id">lt_geF//;</span> <span class="id">apply:</span> <span class="id">gt0</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">lt0</span> <span class="id">x</span> <span id="x:132" class="id">
  <a name="x:132" class="">:</a>
</span> <span class="id">unify_nz</span> <span class="id">!=0</span> <span class="id">nz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">unify_r</span> <span class="id">&lt;=0</span> <span class="id">cond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<'_x_':>'_x">&lt;</a></span> <span class="id">x0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<'_x_':>'_x">:&gt;</a></span> <span class="id">T</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
<span class="id">move:</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[x</span> <span class="id">/=</span> <span class="id">/andP[]]</span>.<br/>
<span class="id">move:</span> <span class="id">cond</span> <span class="id">nz</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">//=;</span> <span class="id">rewrite</span> <span class="id">lt_def</span> <span class="id">[x0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.eqtype.html#::bool_scope:x_'=='_x">==</a></span> <span class="id">_]eq_sym</span> <span class="id">=&gt;</span> <span class="id">-&gt;</span> <span class="id">//</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">/eqP</span> <span class="id">-&gt;</span> <span class="id">/=</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">ge0F</span> <span class="id">x</span> <span id="x:133" class="id">
  <a name="x:133" class="">:</a>
</span> <span class="id">unify_nz</span> <span class="id">!=0</span> <span class="id">nz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">unify_r</span> <span class="id">&lt;=0</span> <span class="id">cond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">x0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<='_x_':>'_x">&lt;=</a></span> <span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<='_x_':>'_x">:&gt;</a></span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.signed.html#Theory.T">=</a></span> <span class="id">false</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">?</span> <span class="id">?;</span> <span class="id">rewrite</span> <span class="id">lt_geF//;</span> <span class="id">apply:</span> <span class="id">lt0</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">ge0</span> <span class="id">x</span> <span id="x:134" class="id">
  <a name="x:134" class="">:</a>
</span> <span class="id">unify_r</span> <span class="id">&gt;=0</span> <span class="id">cond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">x0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<='_x_':>'_x">&lt;=</a></span> <span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<='_x_':>'_x">:&gt;</a></span> <span class="id">T</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[x</span> <span class="id">/=</span> <span class="id">/andP[]];</span> <span class="id">move:</span> <span class="id">cond</span> <span class="id">nz</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">//=</span> <span class="id">_</span> <span class="id">/eqP</span> <span class="id">-&gt;</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">lt0F</span> <span class="id">x</span> <span id="x:135" class="id">
  <a name="x:135" class="">:</a>
</span> <span class="id">unify_r</span> <span class="id">&gt;=0</span> <span class="id">cond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<'_x_':>'_x">&lt;</a></span> <span class="id">x0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<'_x_':>'_x">:&gt;</a></span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.signed.html#Theory.T">=</a></span> <span class="id">false</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">?;</span> <span class="id">rewrite</span> <span class="id">le_gtF//;</span> <span class="id">apply:</span> <span class="id">ge0</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">le0</span> <span class="id">x</span> <span id="x:136" class="id">
  <a name="x:136" class="">:</a>
</span> <span class="id">unify_r</span> <span class="id">&lt;=0</span> <span class="id">cond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">x0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'>='_x_':>'_x">&gt;=</a></span> <span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'>='_x_':>'_x">:&gt;</a></span> <span class="id">T</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[x</span> <span class="id">/=</span> <span class="id">/andP[]];</span> <span class="id">move:</span> <span class="id">cond</span> <span class="id">nz</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">//=</span> <span class="id">_</span> <span class="id">/eqP</span> <span class="id">-&gt;</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">gt0F</span> <span class="id">x</span> <span id="x:137" class="id">
  <a name="x:137" class="">:</a>
</span> <span class="id">unify_r</span> <span class="id">&lt;=0</span> <span class="id">cond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">x0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<'_x_':>'_x">&lt;</a></span> <span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<'_x_':>'_x">:&gt;</a></span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.signed.html#Theory.T">=</a></span> <span class="id">false</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">?;</span> <span class="id">rewrite</span> <span class="id">le_gtF//;</span> <span class="id">apply:</span> <span class="id">le0</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">cmp0</span> <span class="id">x</span> <span id="x:138" class="id">
  <a name="x:138" class="">:</a>
</span> <span class="id">unify_r</span> (<span class="id">Real</span> <span class="id">AnySign</span>) <span class="id">cond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> (<span class="id">x0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'>=<'_x">&gt;=&lt;</a></span> <span class="id">x%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
<span class="id">case:</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[x</span> <span class="id">/=</span> <span class="id">/andP[]]</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">cond</span> <span class="id">nz</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">//=</span> <span class="id">_;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">move=&gt;</span> <span class="id">/eqP</span> <span class="id">-&gt;;</span> <span class="id">rewrite</span> <span class="id">comparablexx];</span><br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span> <span class="id">sx;</span> <span class="id">rewrite</span> <span class="id">/Order</span>.<span class="id">comparable</span> <span class="id">sx//</span> <span class="id">orbT</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">neq0</span> <span class="id">x</span> <span id="x:139" class="id">
  <a name="x:139" class="">:</a>
</span> <span class="id">unify_nz</span> <span class="id">!=0</span> <span class="id">nz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">x%:num</span> <span class="id">!=</span> <span class="id">x0</span> <span class="id">:&gt;</span> <span class="id">T</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
 <span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[x</span> <span class="id">/=</span> <span class="id">/andP[]];</span> <span class="id">move:</span> <span class="id">cond</span> <span class="id">nz</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">eq0F</span> <span class="id">x</span> <span id="x:140" class="id">
  <a name="x:140" class="">:</a>
</span> <span class="id">unify_nz</span> <span class="id">!=0</span> <span class="id">nz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.eqtype.html#::bool_scope:x_'=='_x_':>'_x">==</a></span> <span class="id">x0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.eqtype.html#::bool_scope:x_'=='_x_':>'_x">:&gt;</a></span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.signed.html#Theory.T">=</a></span> <span class="id">false</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">/neq0-/</span>(<span class="id">_</span> <span class="id">x</span>)<span class="id">/negPf-&gt;</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">eq0</span> <span class="id">x</span> <span id="x:141" class="id">
  <a name="x:141" class="">:</a>
</span> <span class="id">unify_r</span> <span class="id">=0</span> <span class="id">cond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">x%:num</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">=</a></span> <span class="id">x0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[x</span> <span class="id">/=</span> <span class="id">/andP[_]];</span> <span class="id">move:</span> <span class="id">cond</span> <span class="id">nz</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">//=</span> <span class="id">/eqP</span> <span class="id">-&gt;</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">widen_signed_subproof</span> <span class="id">x</span> <span class="id">nz'</span> <span class="id">cond'</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">unify_nz</span> <span class="id">nz'</span> <span class="id">nz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">unify_r</span> <span class="id">cond'</span> <span class="id">cond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">x0</span> <span class="id">nz'</span> <span class="id">cond'</span> <span class="id">x%:num</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
<span class="id">case:</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[x</span> <span class="id">/=</span> <span class="id">/andP[]]</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">cond</span> <span class="id">nz</span> <span class="id">cond'</span> <span class="id">nz'</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">//=</span> <span class="id">nz''</span> <span class="id">cond'';</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">?nz''</span> <span class="id">?cond''</span> <span class="id">?orbT</span> <span class="id">//;</span> <span class="id">move:</span> <span class="id">cond''</span> <span class="id">nz''</span> <span class="id">=&gt;</span> <span class="id">/eqP</span> <span class="id">-&gt;;</span> <span class="id">rewrite</span> <span class="id">lexx</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span class="id">widen_signed</span> <span class="id">x</span> <span class="id">nz'</span> <span class="id">cond'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">unz</span> <span class="id">:</span> <span class="id">unify_nz</span> <span class="id">nz'</span> <span class="id">nz</span>) (<span class="id">ucond</span> <span class="id">:</span> <span class="id">unify_r</span> <span class="id">cond'</span> <span class="id">cond</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">widen_signed_subproof</span> <span class="id">x</span> <span class="id">unz</span> <span class="id">ucond</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">widen_signedE</span> <span class="id">x</span> (<span class="id">unz</span> <span class="id">:</span> <span class="id">unify_nz</span> <span class="id">nz</span> <span class="id">nz</span>) (<span class="id">ucond</span> <span class="id">:</span> <span class="id">unify_r</span> <span class="id">cond</span> <span class="id">cond</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">@widen_signed</span> <span class="id">x</span> <span class="id">nz</span> <span class="id">cond</span> <span class="id">unz</span> <span class="id">ucond</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">=</a></span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
 <span class="id">exact/val_inj</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">posE</span> (<span class="id">x</span> <span id="x:153" class="id">
  <a name="x:153" class="">:</a>
</span> <span class="id">sT</span>) (<span class="id">unz</span> <span class="id">:</span> <span class="id">unify_nz</span> <span class="id">!=0</span> <span class="id">nz</span>) (<span class="id">ucond</span> <span class="id">:</span> <span class="id">unify_r</span> <span class="id">&gt;=0</span> <span class="id">cond</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:x_'%:num'">widen_signed</a></span> <span class="id">x%:num%:sgn</span> <span class="id">unz</span> <span class="id">ucond</span>)<span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:x_'%:num'">%:num</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">=</a></span> <span class="id">x%:num</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">nngE</span> (<span class="id">x</span> <span id="x:156" class="id">
  <a name="x:156" class="">:</a>
</span> <span class="id">sT</span>) (<span class="id">unz</span> <span class="id">:</span> <span class="id">unify_nz</span> <span class="id">?=0</span> <span class="id">nz</span>) (<span class="id">ucond</span> <span class="id">:</span> <span class="id">unify_r</span> <span class="id">&gt;=0</span> <span class="id">cond</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:x_'%:num'">widen_signed</a></span> <span class="id">x%:num%:sgn</span> <span class="id">unz</span> <span class="id">ucond</span>)<span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:x_'%:num'">%:num</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">=</a></span> <span class="id">x%:num</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id">Theory</span>.<br/>
<br/>
<span class="vernacular">Arguments</span> <span class="id">bottom</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_</span> <span class="id">_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">gt0</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_</span> <span class="id">_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">le0F</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_</span> <span class="id">_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">lt0</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_</span> <span class="id">_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">ge0F</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_</span> <span class="id">_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">ge0</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">lt0F</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">le0</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">gt0F</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">cmp0</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">neq0</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">eq0F</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">eq0</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">widen_signed</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">widen_signedE</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_</span> <span class="id">_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">posE</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_</span> <span class="id">_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">nngE</span> <span class="id">{d</span> <span class="id">T</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond}</span> <span class="id">_</span> <span class="id">{_</span> <span class="id">_}</span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span class="id">"[&nbsp;'gt0'&nbsp;'of'&nbsp;x&nbsp;]"</span> <span class="id">:=</span> (<span class="id">ltac:</span>(<span class="id">refine</span> (<span class="id">gt0</span> <span class="id">x%:sgn</span>))).<br/>
<span class="vernacular">Notation</span> <span class="id">"[&nbsp;'lt0'&nbsp;'of'&nbsp;x&nbsp;]"</span> <span class="id">:=</span> (<span class="id">ltac:</span>(<span class="id">refine</span> (<span class="id">lt0</span> <span class="id">x%:sgn</span>))).<br/>
<span class="vernacular">Notation</span> <span class="id">"[&nbsp;'ge0'&nbsp;'of'&nbsp;x&nbsp;]"</span> <span class="id">:=</span> (<span class="id">ltac:</span>(<span class="id">refine</span> (<span class="id">ge0</span> <span class="id">x%:sgn</span>))).<br/>
<span class="vernacular">Notation</span> <span class="id">"[&nbsp;'le0'&nbsp;'of'&nbsp;x&nbsp;]"</span> <span class="id">:=</span> (<span class="id">ltac:</span>(<span class="id">refine</span> (<span class="id">le0</span> <span class="id">x%:sgn</span>))).<br/>
<span class="vernacular">Notation</span> <span class="id">"[&nbsp;'cmp0'&nbsp;'of'&nbsp;x&nbsp;]"</span> <span class="id">:=</span> (<span class="id">ltac:</span>(<span class="id">refine</span> (<span class="id">cmp0</span> <span class="id">x%:sgn</span>))).<br/>
<span class="vernacular">Notation</span> <span class="id">"[&nbsp;'neq0'&nbsp;'of'&nbsp;x&nbsp;]"</span> <span class="id">:=</span> (<span class="id">ltac:</span>(<span class="id">refine</span> (<span class="id">neq0</span> <span class="id">x%:sgn</span>))).<br/>
<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id">is_true</span> (<span class="id">0%R</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<'_x">&lt;</a></span> <span class="id">_</span>)<span class="id">%O</span>) <span class="id">=&gt;</span> <span class="id">solve</span> <span class="id">[apply:</span> <span class="id">gt0]</span> <span class="id">:</span> <span class="id">core</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id">is_true</span> (<span class="id">_</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<'_x">&lt;</a></span> <span class="id">0%R</span>)<span class="id">%O</span>) <span class="id">=&gt;</span> <span class="id">solve</span> <span class="id">[apply:</span> <span class="id">lt0]</span> <span class="id">:</span> <span class="id">core</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id">is_true</span> (<span class="id">0%R</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<='_x">&lt;=</a></span> <span class="id">_</span>)<span class="id">%O</span>) <span class="id">=&gt;</span> <span class="id">solve</span> <span class="id">[apply:</span> <span class="id">ge0]</span> <span class="id">:</span> <span class="id">core</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id">is_true</span> (<span class="id">_</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<='_x">&lt;=</a></span> <span class="id">0%R</span>)<span class="id">%O</span>) <span class="id">=&gt;</span> <span class="id">solve</span> <span class="id">[apply:</span> <span class="id">le0]</span> <span class="id">:</span> <span class="id">core</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id">is_true</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::bool_scope:x_'\is'_x">\is</a></span> <span class="id">Num.real</span>)) <span class="id">=&gt;</span> <span class="id">solve</span> <span class="id">[apply:</span> <span class="id">cmp0]</span> <span class="id">:</span> <span class="id">core</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id">is_true</span> (<span class="id">0%R</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'>=<'_x">&gt;=&lt;</a></span> <span class="id">_</span>)<span class="id">%O</span>) <span class="id">=&gt;</span> <span class="id">solve</span> <span class="id">[apply:</span> <span class="id">cmp0]</span> <span class="id">:</span> <span class="id">core</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id">is_true</span> (<span class="id">_</span> <span class="id">!=</span> <span class="id">0%R</span>)<span class="id">%O</span>) <span class="id">=&gt;</span> <span class="id">solve</span> <span class="id">[apply:</span> <span class="id">neq0]</span> <span class="id">:</span> <span class="id">core</span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:pos"</span> <span class="id">:=</span> (<span class="id">widen_signed</span> <span class="id">x%:sgn</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">{posnum</span> <span class="id">_}</span>) (<span class="id">only</span> <span class="id">parsing</span>)<br/>
&nbsp;&nbsp;<span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:nng"</span> <span class="id">:=</span> (<span class="id">widen_signed</span> <span class="id">x%:sgn</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">{nonneg</span> <span class="id">_}</span>) (<span class="id">only</span> <span class="id">parsing</span>)<br/>
&nbsp;&nbsp;<span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:pos"</span> <span class="id">:=</span> (<span class="id">@widen_signed</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">@Signed</span>.<span class="id">from</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">Phantom</span> <span class="id">_</span> <span class="id">x</span>)) <span class="id">!=0</span> (<span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)) <span class="id">_</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;(<span class="id">only</span> <span class="id">printing</span>) <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">"x&nbsp;%:nng"</span> <span class="id">:=</span> (<span class="id">@widen_signed</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">@Signed</span>.<span class="id">from</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">Phantom</span> <span class="id">_</span> <span class="id">x</span>)) <span class="id">?=0</span> (<span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)) <span class="id">_</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;(<span class="id">only</span> <span class="id">printing</span>) <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<br/>
<span class="id">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">ring_scope</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">Order</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">R</span> <span id="Order.R" class="id">
  <a name="Order.R" class="">:</a>
</span> <span class="id">numDomainType</span>) (<span class="id">nz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">r</span> <span id="Order.r" class="id">
  <a name="Order.r" class="">:</a>
</span> <span class="id">real</span>).<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">nR</span> <span class="id">:=</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#Order.R">&amp;</a></span> <span class="id">nz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">r}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">signed_le_total</span> <span class="id">:</span> <span class="id">totalPOrderMixin</span> <span class="id">[porderType</span> <span class="id">of</span> <span class="id">nR]</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">x</span> <span class="id">y;</span> <span class="id">apply:</span> <span class="id">real_comparable</span> <span class="id">=&gt;</span> <span class="id">/=</span>. Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">signed_latticeType</span> <span class="id">:=</span> <span class="id">LatticeType</span> <span class="id">nR</span> <span class="id">signed_le_total</span>.<br/>
<span class="vernacular">Canonical</span> <span class="id">signed_distrLatticeType</span> <span class="id">:=</span> <span class="id">DistrLatticeType</span> <span class="id">nR</span> <span class="id">signed_le_total</span>.<br/>
<span class="vernacular">Canonical</span> <span class="id">signed_orderType</span> <span class="id">:=</span> <span class="id">OrderType</span> <span class="id">nR</span> <span class="id">signed_le_total</span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id">Order</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">POrderStability</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{disp</span> <span class="id">:</span> <span class="id">unit}</span> <span class="id">{T</span> <span id="T:163" class="id">
  <a name="T:163" class="">:</a>
</span> <span class="id">porderType</span> <span class="id">disp}</span> <span class="id">{x0</span> <span class="id">:</span> <span class="id">T}</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">min_nonzero_subdef</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">nz_of_bool</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">xnz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> <span class="id">ynz</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">||</span> <span class="id">xnz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> <span class="id">yr</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> <span class="gallina-kwd">match</span> <span class="id">xr</span> <span class="gallina-kwd">with</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>) <span class="id">=&gt;</span> <span class="id">true</span> <span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">false</span> <span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">||</span> <span class="id">ynz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> <span class="gallina-kwd">match</span> <span class="id">yr</span> <span class="gallina-kwd">with</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>) <span class="id">=&gt;</span> <span class="id">true</span> <span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">false</span> <span class="gallina-kwd">end</span>).<br/>
<span class="vernacular">Arguments</span> <span class="id">min_nonzero_subdef</span> <span class="id">/</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">min_reality_subdef</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:</span> <span class="id">reality</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xr,</span> <span class="id">yr</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>) <span class="id">=&gt;</span> <span class="id">=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>) <span class="id">=&gt;</span> <span class="id">&gt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<span class="id">,</span> <span class="id">Real</span> <span class="id">_</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> <span class="id">_,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>) <span class="id">=&gt;</span> <span class="id">&lt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> <span class="id">_,</span> <span class="id">Real</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">&gt;=&lt;0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">&gt;?&lt;0</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">min_reality_subdef</span> <span class="id">/</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">min_snum_subproof</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:181" class="id">
  <a name="x:181" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">x0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:182" class="id">
  <a name="y:182" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">x0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rnz</span> <span class="id">:=</span> <span class="id">min_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rrl</span> <span class="id">:=</span> <span class="id">min_reality_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">x0</span> <span class="id">rnz</span> <span class="id">rrl</span> (<span class="id">Order.min</span> <span class="id">x%:num</span> <span class="id">y%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
<span class="id">rewrite</span> <span class="id">{}/rnz</span> <span class="id">{}/rrl;</span> <span class="id">apply/andP;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//=</span> <span class="id">x</span> <span class="id">y;</span> <span class="id">rewrite</span> <span class="id">/Order</span>.<span class="id">min;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">x</span>)<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">case:</span> <span class="id">ifP;</span> <span class="id">rewrite</span> <span class="id">?eq0F//</span> <span class="id">=&gt;</span> <span class="id">xlty;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">:=</span> <span class="id">!!</span> <span class="id">lt_trans</span> <span class="id">xlty</span> (<span class="id">lt0</span> <span class="id">y</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">lt_neqAle</span> <span class="id">=&gt;</span> <span class="id">/andP[]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">ifT</span> <span class="id">?eq0F//;</span> <span class="id">apply:</span> <span class="id">lt_le_trans</span> (<span class="id">ge0</span> <span class="id">y</span>)<span class="id">;</span> <span class="id">exact:</span> <span class="id">lt0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">have</span> <span class="id">:=</span> <span class="id">!!</span> <span class="id">le0</span> <span class="id">y;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">le_eqVlt</span> <span class="id">=&gt;</span> <span class="id">/predU1P[-&gt;|];</span> <span class="id">rewrite</span> <span class="id">?lt0</span> <span class="id">?eq0F//;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case:</span> <span class="id">ifP</span> <span class="id">=&gt;</span> <span class="id">_;</span> <span class="id">rewrite</span> <span class="id">?eq0F//</span> <span class="id">lt_neqAle</span> <span class="id">=&gt;</span> <span class="id">/andP[]]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">/orP[x0ley|]</span> <span class="id">:=</span> <span class="id">!!</span> <span class="id">cmp0</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">ifT</span> <span class="id">?eq0F//;</span> <span class="id">apply:</span> <span class="id">lt_le_trans</span> <span class="id">x0ley;</span> <span class="id">exact:</span> <span class="id">lt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">le_eqVlt</span> <span class="id">=&gt;</span> <span class="id">/predU1P[-&gt;|];</span> <span class="id">rewrite</span> <span class="id">?lt0</span> <span class="id">?eq0F//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">ifP</span> <span class="id">=&gt;</span> <span class="id">_;</span> <span class="id">rewrite</span> <span class="id">?eq0F//</span> <span class="id">lt_neqAle</span> <span class="id">=&gt;</span> <span class="id">/andP[]</span>.<br/>
<span class="id">move:</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//=</span> <span class="id">x</span> <span class="id">y;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">x</span>)<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">apply:</span> <span class="id">comparable_minr;</span> <span class="id">exact:</span> <span class="id">cmp0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">minEle;</span> <span class="id">case:</span> <span class="id">ifP;</span> <span class="id">rewrite</span> <span class="id">ge0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">?eq0</span> <span class="id">minEle</span> <span class="id">?ge0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">?eq0</span> <span class="id">minElt;</span> <span class="id">case:</span> <span class="id">ifP;</span> <span class="id">rewrite</span> <span class="id">?eq0//</span> <span class="id">lt0F</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">minEle;</span> <span class="id">case:</span> <span class="id">ifP</span> <span class="id">=&gt;</span> <span class="id">[xlty|];</span> <span class="id">rewrite</span> <span class="id">?le0//;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">le_trans</span> <span class="id">xlty</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">le0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">have</span> <span class="id">/orP[x0ley|]</span> <span class="id">:=</span> <span class="id">!!</span> <span class="id">cmp0</span> <span class="id">y;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[rewrite</span> <span class="id">minEle</span> <span class="id">ifT</span> <span class="id">?le0//;</span> <span class="id">apply:</span> <span class="id">le_trans</span> <span class="id">x0ley;</span> <span class="id">exact:</span> <span class="id">le0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|rewrite</span> <span class="id">minEle;</span> <span class="id">case:</span> <span class="id">ifP</span> <span class="id">=&gt;</span> <span class="id">//;</span> <span class="id">exact:</span> <span class="id">le_trans]]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">min_snum</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:189" class="id">
  <a name="x:189" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">x0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:190" class="id">
  <a name="y:190" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">x0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">min_snum_subproof</span> <span class="id">x</span> <span class="id">y</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">max_nonzero_subdef</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">nz_of_bool</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">xnz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> <span class="id">ynz</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">||</span> <span class="id">xnz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> <span class="gallina-kwd">match</span> <span class="id">xr</span> <span class="gallina-kwd">with</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>) <span class="id">=&gt;</span> <span class="id">true</span> <span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">false</span> <span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">||</span> <span class="id">ynz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> <span class="id">xr</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> <span class="gallina-kwd">match</span> <span class="id">yr</span> <span class="gallina-kwd">with</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>) <span class="id">=&gt;</span> <span class="id">true</span> <span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">false</span> <span class="gallina-kwd">end</span>).<br/>
<span class="vernacular">Arguments</span> <span class="id">max_nonzero_subdef</span> <span class="id">/</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">max_reality_subdef</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:</span> <span class="id">reality</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xr,</span> <span class="id">yr</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>) <span class="id">=&gt;</span> <span class="id">=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>) <span class="id">=&gt;</span> <span class="id">&lt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<span class="id">,</span> <span class="id">Real</span> <span class="id">_</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> <span class="id">_,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>) <span class="id">=&gt;</span> <span class="id">&gt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> <span class="id">_,</span> <span class="id">Real</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">&gt;=&lt;0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">&gt;?&lt;0</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">max_reality_subdef</span> <span class="id">/</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">max_snum_subproof</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:207" class="id">
  <a name="x:207" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">x0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:208" class="id">
  <a name="y:208" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">x0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rnz</span> <span class="id">:=</span> <span class="id">max_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rrl</span> <span class="id">:=</span> <span class="id">max_reality_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">x0</span> <span class="id">rnz</span> <span class="id">rrl</span> (<span class="id">Order.max</span> <span class="id">x%:num</span> <span class="id">y%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
<span class="id">rewrite</span> <span class="id">{}/rnz</span> <span class="id">{}/rrl;</span> <span class="id">apply/andP;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//=</span> <span class="id">x</span> <span class="id">y;</span> <span class="id">rewrite</span> <span class="id">maxElt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">x</span>)<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">case:</span> <span class="id">ifP</span> <span class="id">=&gt;</span> <span class="id">[xlty|];</span> <span class="id">rewrite</span> <span class="id">?eq0F//;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> <span class="id">[suff</span> <span class="id">:</span> (<span class="id">x0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.order.html#Order.POSyntax.::order_scope:x_'<'_x">&lt;</a></span> <span class="id">y%:num</span>)<span class="id">%O</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">lt_def</span> <span class="id">=&gt;</span> <span class="id">/andP[]];</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> <span class="id">le_lt_trans</span> <span class="id">xlty;</span> <span class="id">exact:</span> <span class="id">ge0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">ifT</span> <span class="id">?eq0F//;</span> <span class="id">apply:</span> <span class="id">le_lt_trans</span> (<span class="id">gt0</span> <span class="id">y</span>)<span class="id">;</span> <span class="id">exact:</span> <span class="id">le0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">have</span> <span class="id">:=</span> <span class="id">!!</span> <span class="id">ge0</span> <span class="id">x;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">le_eqVlt</span> <span class="id">=&gt;</span> <span class="id">/predU1P[&lt;-|];</span> <span class="id">rewrite</span> <span class="id">?gt0</span> <span class="id">?eq0F//;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case:</span> <span class="id">ifP</span> <span class="id">=&gt;</span> <span class="id">_;</span> <span class="id">rewrite</span> <span class="id">?eq0F//</span> <span class="id">lt_def</span> <span class="id">=&gt;</span> <span class="id">/andP[]]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">/orP[|xlex0]</span> <span class="id">:=</span> <span class="id">!!</span> <span class="id">cmp0</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">le_eqVlt</span> <span class="id">=&gt;</span> <span class="id">/predU1P[&lt;-|];</span> <span class="id">rewrite</span> <span class="id">?gt0</span> <span class="id">?eq0F//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">ifP</span> <span class="id">=&gt;</span> <span class="id">_;</span> <span class="id">rewrite</span> <span class="id">?eq0F//</span> <span class="id">lt_def</span> <span class="id">=&gt;</span> <span class="id">/andP[]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">ifT</span> <span class="id">?eq0F//;</span> <span class="id">apply:</span> (<span class="id">le_lt_trans</span> <span class="id">xlex0</span>)<span class="id">;</span> <span class="id">exact:</span> <span class="id">gt0</span>.<br/>
<span class="id">move:</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//=</span> <span class="id">x</span> <span class="id">y;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">x</span>)<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">apply:</span> <span class="id">comparable_maxr;</span> <span class="id">exact:</span> <span class="id">cmp0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">?eq0</span> <span class="id">maxEle</span> <span class="id">?le0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">?eq0</span> <span class="id">maxElt</span> <span class="id">ifF//</span> <span class="id">le_gtF//</span> <span class="id">le0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">maxEle;</span> <span class="id">case:</span> <span class="id">ifP;</span> <span class="id">rewrite</span> <span class="id">?ge0//;</span> <span class="id">exact/le_trans/ge0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">maxElt;</span> <span class="id">case:</span> <span class="id">ifP</span> <span class="id">=&gt;</span> <span class="id">[xlty|];</span> <span class="id">rewrite</span> <span class="id">?le0//</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">have</span> <span class="id">/orP[|xlex0]</span> <span class="id">:=</span> <span class="id">!!</span> <span class="id">cmp0</span> <span class="id">x;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[rewrite</span> <span class="id">maxEle;</span> <span class="id">case:</span> <span class="id">ifP</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">/[swap];</span> <span class="id">exact:</span> <span class="id">le_trans</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|rewrite</span> <span class="id">maxEle</span> <span class="id">ifT</span> <span class="id">?ge0//;</span> <span class="id">apply:</span> (<span class="id">le_trans</span> <span class="id">xlex0</span>)<span class="id">;</span> <span class="id">exact:</span> <span class="id">ge0]]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">max_snum</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:215" class="id">
  <a name="x:215" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">x0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:216" class="id">
  <a name="y:216" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">x0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">max_snum_subproof</span> <span class="id">x</span> <span class="id">y</span>).<br/>
<br/>
<span class="vernacular">End</span> <span class="id">POrderStability</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">NumDomainStability</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{R</span> <span id="R:217" class="id">
  <a name="R:217" class="">:</a>
</span> <span class="id">numDomainType}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">zero_snum_subproof</span> <span class="id">:</span> <span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">?=0</span> <span class="id">=0</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
 <span class="id">exact:</span> <span class="id">eqxx</span>. Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">zero_snum</span> <span class="id">:=</span> <span class="id">Signed.mk</span> <span class="id">zero_snum_subproof</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">one_snum_subproof</span> <span class="id">:</span> <span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">!=0</span> <span class="id">&gt;=0</span> (<span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">oner_eq0</span> <span class="id">ler01</span>. Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">one_snum</span> <span class="id">:=</span> <span class="id">Signed.mk</span> <span class="id">one_snum_subproof</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">opp_reality_subdef</span> (<span class="id">xnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:</span> <span class="id">reality</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xr</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>) <span class="id">=&gt;</span> <span class="id">=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>) <span class="id">=&gt;</span> <span class="id">&lt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>) <span class="id">=&gt;</span> <span class="id">&gt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> <span class="id">AnySign</span>    <span class="id">=&gt;</span> <span class="id">&gt;=&lt;0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Arbitrary</span>              <span class="id">=&gt;</span> <span class="id">&gt;?&lt;0</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">opp_snum_subproof</span> (<span class="id">xnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:223" class="id">
  <a name="x:223" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">r</span> <span id="r:224" class="id">
  <a name="r:224" class="">:=</a>
</span> <span class="id">opp_reality_subdef</span> <span class="id">xnz</span> <span class="id">xr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">xnz</span> <span class="id">r</span> (<span class="id">-</span> <span class="id">x%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">{}/r;</span> <span class="id">case:</span> <span class="id">xr</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]//=</span> <span class="id">[r]/=;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">oppr_eq0</span> <span class="id">?</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::core_scope:'('_x_','_x_','_'..'_','_x_')'">oppr_ge0,</a></span> <span class="id">oppr_le0</span>)<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::core_scope:'('_x_','_x_','_'..'_','_x_')'">//</a></span> <span class="id">orbC</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">opp_snum</span> (<span class="id">xnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">:</span> <span class="id">reality</span>) (<span class="id">x</span> <span id="x:227" class="id">
  <a name="x:227" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">opp_snum_subproof</span> <span class="id">x</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">add_samesign_subdef</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xr,</span> <span class="id">yr</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>) <span class="id">=&gt;</span> <span class="id">true</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">add_nonzero_subdef</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">nz_of_bool</span> (<span class="id">add_samesign_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> (<span class="id">xnz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">||</a></span> <span class="id">ynz</span>)).<br/>
<span class="vernacular">Arguments</span> <span class="id">add_nonzero_subdef</span> <span class="id">/</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">add_reality_subdef</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:</span> <span class="id">reality</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xr,</span> <span class="id">yr</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>) <span class="id">=&gt;</span> <span class="id">=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>) <span class="id">=&gt;</span> <span class="id">&gt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>) <span class="id">=&gt;</span> <span class="id">&lt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> <span class="id">_,</span> <span class="id">Real</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">&gt;=&lt;0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">&gt;?&lt;0</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">add_reality_subdef</span> <span class="id">/</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">add_snum_subproof</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:248" class="id">
  <a name="x:248" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:249" class="id">
  <a name="y:249" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rnz</span> <span class="id">:=</span> <span class="id">add_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rrl</span> <span class="id">:=</span> <span class="id">add_reality_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">rnz</span> <span class="id">rrl</span> (<span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssralg.html#::ring_scope:x_'+'_x">+</a></span> <span class="id">y%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
<span class="id">rewrite</span> <span class="id">{}/rnz</span> <span class="id">{}/rrl;</span> <span class="id">apply/andP;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//=</span> <span class="id">x</span> <span class="id">y;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">1?addr_ss_eq0</span> <span class="id">?</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::core_scope:'('_x_','_x_','_'..'_','_x_')'">eq0F,</a></span> <span class="id">ge0,</span> <span class="id">le0,</span> <span class="id">andbF,</span> <span class="id">orbT</span>).<br/>
<span class="id">have</span> <span class="id">addr_le0</span> <span class="id">a</span> <span class="id">b</span> <span class="id">:</span> <span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:252">&lt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">b</span> <span class="id"><a href="mathcomp.analysis.signed.html#b:253">&lt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:252">+</a></span> <span class="id">b</span> <span class="id"><a href="mathcomp.analysis.signed.html#b:253">&lt;=</a></span> <span class="id">0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-!oppr_ge0</span> <span class="id">opprD;</span> <span class="id">apply:</span> <span class="id">addr_ge0</span>.<br/>
<span class="id">move:</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//=</span> <span class="id">x</span> <span class="id">y;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">rewrite</span> <span class="id">addr_ge0|by</span> <span class="id">rewrite</span> <span class="id">addr_le0|by</span> <span class="id">rewrite</span> <span class="id">-realE</span> <span class="id">realD</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">x</span>)<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">y</span>)<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">!eq0</span> <span class="id">addr0]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">add_snum</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:258" class="id">
  <a name="x:258" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:259" class="id">
  <a name="y:259" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">add_snum_subproof</span> <span class="id">x</span> <span class="id">y</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">mul_nonzero_subdef</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">nz_of_bool</span> (<span class="id">xnz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> <span class="id">ynz</span>).<br/>
<span class="vernacular">Arguments</span> <span class="id">mul_nonzero_subdef</span> <span class="id">/</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">mul_reality_subdef</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:</span> <span class="id">reality</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xr,</span> <span class="id">yr</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<span class="id">,</span> <span class="id">_</span> <span class="id">|</span> <span class="id">_,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>) <span class="id">=&gt;</span> <span class="id">=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>) <span class="id">=&gt;</span> <span class="id">&gt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&lt;=0</span>)<span class="id">,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>) <span class="id">=&gt;</span> <span class="id">&lt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> <span class="id">_,</span>          <span class="id">Real</span> <span class="id">_</span>          <span class="id">=&gt;</span> <span class="id">&gt;=&lt;0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">,</span> <span class="id">_</span>                            <span class="id">=&gt;</span> <span class="id">&gt;?&lt;0</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">mul_reality_subdef</span> <span class="id">/</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">mul_snum_subproof</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:274" class="id">
  <a name="x:274" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:275" class="id">
  <a name="y:275" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rnz</span> <span class="id">:=</span> <span class="id">mul_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rrl</span> <span class="id">:=</span> <span class="id">mul_reality_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">rnz</span> <span class="id">rrl</span> (<span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssralg.html#::ring_scope:x_'*'_x">*</a></span> <span class="id">y%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
<span class="id">rewrite</span> <span class="id">{}/rnz</span> <span class="id">{}/rrl;</span> <span class="id">apply/andP;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//</span> <span class="id">x</span> <span class="id">y;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">mulf_neq0</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]/=</span> <span class="id">x</span> <span class="id">y</span> <span class="id">//;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">rewrite</span> <span class="id">mulr_ge0|by</span> <span class="id">rewrite</span> <span class="id">mulr_le0_ge0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">mulr_ge0_le0|by</span> <span class="id">rewrite</span> <span class="id">mulr_le0|by</span> <span class="id">rewrite</span> <span class="id">-realE</span> <span class="id">realM</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">x</span>)<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">y</span>)<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">eq0</span> <span class="id">?mulr0//</span> <span class="id">mul0r]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">mul_snum</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:282" class="id">
  <a name="x:282" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:283" class="id">
  <a name="y:283" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">mul_snum_subproof</span> <span class="id">x</span> <span class="id">y</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">natmul_snum_subproof</span> (<span class="id">xnz</span> <span class="id">nnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">nr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:288" class="id">
  <a name="x:288" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">n</span> <span id="n:289" class="id">
  <a name="n:289" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0%N</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rnz</span> <span class="id">:=</span> <span class="id">mul_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">xr</span> <span class="id">nr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rrl</span> <span class="id">:=</span> <span class="id">mul_reality_subdef</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">xr</span> <span class="id">nr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">rnz</span> <span class="id">rrl</span> (<span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssralg.html#::ring_scope:x_'*+'_x">*+</a></span> <span class="id">n%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
<span class="id">rewrite</span> <span class="id">{}/rnz</span> <span class="id">{}/rrl;</span> <span class="id">apply/andP;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">xr</span> <span class="id">nr</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">x</span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//</span> <span class="id">x</span> <span class="id">n;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">mulrn_eq0//=</span> <span class="id">?eq0F</span>.<br/>
<span class="id">move:</span> <span class="id">xr</span> <span class="id">nr</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">x</span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]/=</span> <span class="id">x</span> <span class="id">[[|n]//=</span> <span class="id">_]</span> <span class="id">//;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">x</span>)<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">mulrn_wge0|by</span> <span class="id">rewrite</span> <span class="id">mulrn_wle0|by</span> <span class="id">rewrite</span> <span class="id">eq0</span> <span class="id">mul0rn</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">apply:</span> <span class="id">real_comparable;</span> <span class="id">rewrite</span> <span class="id">?real0</span> <span class="id">?realrMn]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">natmul_snum</span> (<span class="id">xnz</span> <span class="id">nnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">nr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:296" class="id">
  <a name="x:296" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">n</span> <span id="n:297" class="id">
  <a name="n:297" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0%N</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">natmul_snum_subproof</span> <span class="id">x</span> <span class="id">n</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">intmul_snum_subproof</span> (<span class="id">xnz</span> <span class="id">nnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">nr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:302" class="id">
  <a name="x:302" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">n</span> <span id="n:303" class="id">
  <a name="n:303" class="">:</a>
</span> <span class="id">{num</span> <span class="id">int</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rnz</span> <span class="id">:=</span> <span class="id">mul_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">xr</span> <span class="id">nr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rrl</span> <span class="id">:=</span> <span class="id">mul_reality_subdef</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">xr</span> <span class="id">nr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">rnz</span> <span class="id">rrl</span> (<span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrint.html#::ring_scope:x_'*~'_x">*~</a></span> <span class="id">n%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
<span class="id">rewrite</span> <span class="id">{}/rnz</span> <span class="id">{}/rrl;</span> <span class="id">apply/andP;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">xr</span> <span class="id">nr</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">x</span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//</span> <span class="id">x</span> <span class="id">n;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">mulrz_neq0//=</span> <span class="id">?neq0</span>.<br/>
<span class="id">move:</span> <span class="id">xr</span> <span class="id">nr</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">x</span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]/=</span> <span class="id">x</span> <span class="id">n</span> <span class="id">//;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">x</span>)<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">mulrz_ge0|by</span> <span class="id">rewrite</span> <span class="id">mulrz_le0_ge0|by</span> <span class="id">rewrite</span> <span class="id">eq0</span> <span class="id">mul0rz</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">mulrz_ge0_le0|by</span> <span class="id">rewrite</span> <span class="id">mulrz_le0|by</span> <span class="id">rewrite</span> <span class="id">eq0</span> <span class="id">mulr0z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">-realE</span> <span class="id">rpredMz//;</span> <span class="id">apply:</span> <span class="id">cmp0]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">intmul_snum</span> (<span class="id">xnz</span> <span class="id">nnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">nr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:310" class="id">
  <a name="x:310" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">n</span> <span id="n:311" class="id">
  <a name="n:311" class="">:</a>
</span> <span class="id">{num</span> <span class="id">int</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">intmul_snum_subproof</span> <span class="id">x</span> <span class="id">n</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">inv_snum_subproof</span> (<span class="id">xnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:314" class="id">
  <a name="x:314" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">xnz</span> <span class="id">xr</span> (<span class="id">x%:num^-1</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">xr</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]//=</span> <span class="id">[r]/=;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">invr_eq0</span> <span class="id">?</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::core_scope:'('_x_','_x_','_'..'_','_x_')'">invr_ge0,</a></span> <span class="id">invr_le0</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::core_scope:'('_x_','_x_','_'..'_','_x_')'">?realV</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">inv_snum</span> (<span class="id">xnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">:</span> <span class="id">reality</span>) (<span class="id">x</span> <span id="x:317" class="id">
  <a name="x:317" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">inv_snum_subproof</span> <span class="id">x</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">exprn_nonzero_subdef</span> (<span class="id">xnz</span> <span class="id">nnz</span> <span class="id">:</span> <span class="id">nullity</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">xr</span> <span class="id">nr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:</span> <span class="id">nullity</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">nz_of_bool</span> (<span class="id">xnz</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">||</a></span> <span class="gallina-kwd">match</span> <span class="id">nr</span> <span class="gallina-kwd">with</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>) <span class="id">=&gt;</span> <span class="id">true</span> <span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">false</span> <span class="gallina-kwd">end</span>).<br/>
<span class="vernacular">Arguments</span> <span class="id">exprn_nonzero_subdef</span> <span class="id">/</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">exprn_reality_subdef</span> (<span class="id">xnz</span> <span class="id">nnz</span> <span class="id">:</span> <span class="id">nullity</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">xr</span> <span class="id">nr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:</span> <span class="id">reality</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xr,</span> <span class="id">nr</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>) <span class="id">=&gt;</span> <span class="id">&gt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>)<span class="id">,</span> <span class="id">_</span> <span class="id">=&gt;</span> (<span class="gallina-kwd">if</span> <span class="id">nnz</span> <span class="gallina-kwd">then</span> <span class="id">=0</span> <span class="gallina-kwd">else</span> <span class="id">&gt;=0</span>)<span class="id">%snum_sign</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>)<span class="id">,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">&gt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">&gt;=&lt;0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">&gt;?&lt;0</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">exprn_reality_subdef</span> <span class="id">/</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">exprn_snum_subproof</span> (<span class="id">xnz</span> <span class="id">nnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">nr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:333" class="id">
  <a name="x:333" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">n</span> <span id="n:334" class="id">
  <a name="n:334" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0%N</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rnz</span> <span class="id">:=</span> <span class="id">exprn_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">xr</span> <span class="id">nr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rrl</span> <span class="id">:=</span> <span class="id">exprn_reality_subdef</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">xr</span> <span class="id">nr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">rnz</span> <span class="id">rrl</span> (<span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssralg.html#::ring_scope:x_'^+'_x">^+</a></span> <span class="id">n%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
<span class="id">rewrite</span> <span class="id">{}/rnz</span> <span class="id">{}/rrl;</span> <span class="id">apply/andP;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">xr</span> <span class="id">nr</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">x</span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//</span> <span class="id">x</span> <span class="id">n;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">x</span>)<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">n</span>)<span class="id">];</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">expf_eq0/=</span> <span class="id">?eq0//</span> <span class="id">?eq0F</span> <span class="id">?andbF//</span>.<br/>
<span class="id">move:</span> <span class="id">xr</span> <span class="id">nr</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">x</span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]/=</span> <span class="id">x</span> <span class="id">[[|n]//=</span> <span class="id">_]</span> <span class="id">//;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">x</span>)<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">n</span>)<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">[_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">||</a></span> <span class="id">_]realX</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">eq0</span> <span class="id">expr0n|exact:</span> <span class="id">exprn_ge0|by</span> <span class="id">rewrite</span> <span class="id">expr0</span> <span class="id">ler01]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">exprn_snum</span> (<span class="id">xnz</span> <span class="id">nnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">nr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:341" class="id">
  <a name="x:341" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumDomainStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">n</span> <span id="n:342" class="id">
  <a name="n:342" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0%N</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">exprn_snum_subproof</span> <span class="id">x</span> <span class="id">n</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">norm_snum_subproof</span> <span class="id">{V</span> <span id="V:343" class="id">
  <a name="V:343" class="">:</a>
</span> <span class="id">normedZmodType</span> <span class="id">R}</span> (<span class="id">x</span> <span id="x:344" class="id">
  <a name="x:344" class="">:</a>
</span> <span class="id">V</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">?=0</span> <span class="id">&gt;=0</span> <span class="id">`|x|</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span>. Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">norm_snum</span> <span class="id">{V</span> <span id="V:345" class="id">
  <a name="V:345" class="">:</a>
</span> <span class="id">normedZmodType</span> <span class="id">R}</span> (<span class="id">x</span> <span id="x:346" class="id">
  <a name="x:346" class="">:</a>
</span> <span class="id">V</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">norm_snum_subproof</span> <span class="id">x</span>).<br/>
<br/>
<span class="vernacular">End</span> <span class="id">NumDomainStability</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">RcfStability</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{R</span> <span id="R:347" class="id">
  <a name="R:347" class="">:</a>
</span> <span class="id">rcfType}</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">sqrt_nonzero_subdef</span> (<span class="id">xnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id">xr</span> <span class="id">is</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>) <span class="gallina-kwd">then</span> <span class="id">xnz</span> <span class="gallina-kwd">else</span> <span class="id">MaybeZero</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">sqrt_nonzero_subdef</span> <span class="id">/</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">sqrt_snum_subproof</span> <span class="id">xnz</span> <span class="id">xr</span> (<span class="id">x</span> <span id="x:353" class="id">
  <a name="x:353" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#RcfStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nz</span> <span class="id">:=</span> <span class="id">sqrt_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">xr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">nz</span> <span class="id">&gt;=0</span> (<span class="id">Num.sqrt</span> <span class="id">x%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">{}/nz;</span> <span class="id">case:</span> <span class="id">xnz</span> <span class="id">xr</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">-[[[]|]|]//=</span> <span class="id">x;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">/=</span> <span class="id">sqrtr_ge0//</span> <span class="id">andbT</span> <span class="id">sqrtr_eq0</span> <span class="id">le0F</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">sqrt_snum</span> <span class="id">xnz</span> <span class="id">xr</span> (<span class="id">x</span> <span id="x:357" class="id">
  <a name="x:357" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#RcfStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">sqrt_snum_subproof</span> <span class="id">x</span>).<br/>
<br/>
<span class="vernacular">End</span> <span class="id">RcfStability</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">NumClosedStability</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{R</span> <span id="R:358" class="id">
  <a name="R:358" class="">:</a>
</span> <span class="id">numClosedFieldType}</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">sqrtC_reality_subdef</span> (<span class="id">xnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">:</span> <span class="id">reality</span>) <span class="id">:</span> <span class="id">reality</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xr</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">=0</span>) <span class="id">=&gt;</span> <span class="id">=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">Real</span> (<span class="id">Sign</span> <span class="id">&gt;=0</span>) <span class="id">=&gt;</span> <span class="id">&gt;=0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">&gt;?&lt;0</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">sqrtC_reality_subdef</span> <span class="id">/</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">sqrtC_snum_subproof</span> <span class="id">xnz</span> <span class="id">xr</span> (<span class="id">x</span> <span id="x:364" class="id">
  <a name="x:364" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumClosedStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">r</span> <span id="r:365" class="id">
  <a name="r:365" class="">:=</a>
</span> <span class="id">sqrtC_reality_subdef</span> <span class="id">xnz</span> <span class="id">xr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">xnz</span> <span class="id">r</span> (<span class="id">sqrtC</span> <span class="id">x%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
<span class="id">rewrite</span> <span class="id">{}/r;</span> <span class="id">apply/andP;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">sqrtC_eq0;</span> <span class="id">case:</span> <span class="id">xr</span> <span class="id">xnz</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">/=</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">xr</span> <span class="id">xnz</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[]//=</span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">?sqrtC_ge0//</span> <span class="id">sqrtC_eq0</span> <span class="id">eq0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">sqrtC_snum</span> <span class="id">xnz</span> <span class="id">xr</span> (<span class="id">x</span> <span id="x:368" class="id">
  <a name="x:368" class="">:</a>
</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#NumClosedStability.R">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">sqrtC_snum_subproof</span> <span class="id">x</span>).<br/>
<br/>
<span class="vernacular">End</span> <span class="id">NumClosedStability</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">NatStability</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">nat_scope</span>.<br/>
<span class="vernacular">Implicit</span> <span class="gallina-kwd">Type</span> (<span class="id">n</span> <span class="id">:</span> <span class="id">nat</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">zeron_snum_subproof</span> <span class="id">:</span> <span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">?=0</span> <span class="id">=0</span> <span class="id">0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">zeron_snum</span> <span class="id">:=</span> <span class="id">Signed.mk</span> <span class="id">zeron_snum_subproof</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">succn_snum_subproof</span> <span class="id">n</span> <span id="n:369" class="id">
  <a name="n:369" class="">:</a>
</span> <span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">!=0</span> <span class="id">&gt;=0</span> <span class="id">n</span>.<span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'.+1'">+1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">succn_snum</span> <span class="id">n</span> <span id="n:370" class="id">
  <a name="n:370" class="">:=</a>
</span> <span class="id">Signed.mk</span> (<span class="id">succn_snum_subproof</span> <span class="id">n</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">double_snum_subproof</span> <span class="id">nz</span> <span class="id">r</span> (<span class="id">x</span> <span id="x:373" class="id">
  <a name="x:373" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">r}</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">nz</span> <span class="id">r</span> <span class="id">x%:num</span>.<span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'.*2'">*2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
 <span class="gallina-kwd">by</span>  <span class="id">move:</span> <span class="id">nz</span> <span class="id">r</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[]</span> <span class="id">[[[]|]|]</span> <span class="id">[[|n]]</span>. Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">double_snum</span> <span class="id">nz</span> <span class="id">r</span> <span class="id">x</span> <span id="x:376" class="id">
  <a name="x:376" class="">:=</a>
</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">@double_snum_subproof</span> <span class="id">nz</span> <span class="id">r</span> <span class="id">x</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">addn_snum_subproof</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:381" class="id">
  <a name="x:381" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:382" class="id">
  <a name="y:382" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rnz</span> <span class="id">:=</span> <span class="id">add_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rrl</span> <span class="id">:=</span> <span class="id">add_reality_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">rnz</span> <span class="id">rrl</span> (<span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'+'_x">+</a></span> <span class="id">y%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
<span class="id">rewrite</span> <span class="id">{}/rnz</span> <span class="id">{}/rrl;</span> <span class="id">apply/andP;</span> <span class="id">split;</span><br/>
<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//=</span> <span class="id">[[|x]//=</span> <span class="id">_]</span> <span class="id">[[|y]]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">addn_snum</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:389" class="id">
  <a name="x:389" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:390" class="id">
  <a name="y:390" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">addn_snum_subproof</span> <span class="id">x</span> <span class="id">y</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">muln_snum_subproof</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:395" class="id">
  <a name="x:395" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:396" class="id">
  <a name="y:396" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rnz</span> <span class="id">:=</span> <span class="id">mul_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rrl</span> <span class="id">:=</span> <span class="id">mul_reality_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">rnz</span> <span class="id">rrl</span> (<span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'*'_x">*</a></span> <span class="id">y%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
<span class="id">rewrite</span> <span class="id">{}/rnz</span> <span class="id">{}/rrl;</span> <span class="id">apply/andP;</span> <span class="id">split;</span><br/>
<span class="id">move:</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//=;</span><br/>
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">[[|x]//=</span> <span class="id">_]</span> <span class="id">[[|y]//=</span> <span class="id">_];</span> <span class="id">rewrite</span> <span class="id">muln0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">muln_snum</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:403" class="id">
  <a name="x:403" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:404" class="id">
  <a name="y:404" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">muln_snum_subproof</span> <span class="id">x</span> <span class="id">y</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">expn_snum_subproof</span> (<span class="id">xnz</span> <span class="id">nnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">nr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:409" class="id">
  <a name="x:409" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">n</span> <span id="n:410" class="id">
  <a name="n:410" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rnz</span> <span class="id">:=</span> <span class="id">exprn_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">xr</span> <span class="id">nr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rrl</span> <span class="id">:=</span> <span class="id">exprn_reality_subdef</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">xr</span> <span class="id">nr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">rnz</span> <span class="id">rrl</span> (<span class="id">x%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'^'_x">^</a></span> <span class="id">n%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
<span class="id">rewrite</span> <span class="id">{}/rnz</span> <span class="id">{}/rrl;</span> <span class="id">apply/andP;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> <span class="id">xr</span> <span class="id">nr</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">x</span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//</span> <span class="id">x</span> <span class="id">n;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">x</span>)<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">?eq0</span> <span class="id">?expn0//</span> <span class="id">expn_eq0</span> <span class="id">?eq0F]</span>.<br/>
<span class="id">move:</span> <span class="id">xr</span> <span class="id">nr</span> <span class="id">xnz</span> <span class="id">nnz</span> <span class="id">x</span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]/=</span> <span class="id">x</span> <span class="id">[[|n]//=</span> <span class="id">_]</span> <span class="id">//;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">?[by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">x</span>)<span class="id">|by</span> <span class="id">case:</span> (<span class="id">bottom</span> <span class="id">n</span>)<span class="id">|by</span> <span class="id">rewrite</span> <span class="id">eq0</span> <span class="id">exp0n]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">expn_snum</span> (<span class="id">xnz</span> <span class="id">nnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">nr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:417" class="id">
  <a name="x:417" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">n</span> <span id="n:418" class="id">
  <a name="n:418" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">expn_snum_subproof</span> <span class="id">x</span> <span class="id">n</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">minn_snum_subproof</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:423" class="id">
  <a name="x:423" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:424" class="id">
  <a name="y:424" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rnz</span> <span class="id">:=</span> <span class="id">min_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rrl</span> <span class="id">:=</span> <span class="id">min_reality_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">rnz</span> <span class="id">rrl</span> (<span class="id">min</span> <span class="id">x%:num</span> <span class="id">y%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
<span class="id">rewrite</span> <span class="id">{}/rnz</span> <span class="id">{}/rrl;</span> <span class="id">apply/andP;</span> <span class="id">split;</span><br/>
<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//=</span> <span class="id">[[|x]//=</span> <span class="id">_]</span> <span class="id">[[|y]]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">minn_snum</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:431" class="id">
  <a name="x:431" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:432" class="id">
  <a name="y:432" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">minn_snum_subproof</span> <span class="id">x</span> <span class="id">y</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">maxn_snum_subproof</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:437" class="id">
  <a name="x:437" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:438" class="id">
  <a name="y:438" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rnz</span> <span class="id">:=</span> <span class="id">max_nonzero_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rrl</span> <span class="id">:=</span> <span class="id">max_reality_subdef</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">xr</span> <span class="id">yr</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0</span> <span class="id">rnz</span> <span class="id">rrl</span> (<span class="id">maxn</span> <span class="id">x%:num</span> <span class="id">y%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
<span class="id">rewrite</span> <span class="id">{}/rnz</span> <span class="id">{}/rrl;</span> <span class="id">apply/andP;</span> <span class="id">split;</span><br/>
<span class="id">move:</span> <span class="id">xr</span> <span class="id">yr</span> <span class="id">xnz</span> <span class="id">ynz</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[[[]|]|]</span> <span class="id">[]</span> <span class="id">[]//=;</span><br/>
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">[[|x]//=</span> <span class="id">_]</span> <span class="id">[[|y]//=</span> <span class="id">_];</span> <span class="id">rewrite</span> <span class="id">maxnSS</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">maxn_snum</span> (<span class="id">xnz</span> <span class="id">ynz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">yr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:445" class="id">
  <a name="x:445" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) (<span class="id">y</span> <span id="y:446" class="id">
  <a name="y:446" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">ynz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">yr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">maxn_snum_subproof</span> <span class="id">x</span> <span class="id">y</span>).<br/>
<br/>
<span class="vernacular">End</span> <span class="id">NatStability</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">IntStability</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">Posz_snum_subproof</span> (<span class="id">xnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:449" class="id">
  <a name="x:449" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0%N</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Signed.spec</span> <span class="id">0%Z</span> <span class="id">xnz</span> <span class="id">xr</span> (<span class="id">Posz</span> <span class="id">x%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
<span class="gallina-kwd">by</span> <span class="id">apply/andP;</span> <span class="id">split;</span> <span class="id">move:</span> <span class="id">xr</span> <span class="id">xnz</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[[[]|]|]</span> <span class="id">[]//=;</span> <span class="id">move=&gt;</span> <span class="id">[[|x]//=</span> <span class="id">_]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">Posz_snum</span> (<span class="id">xnz</span> <span class="id">:</span> <span class="id">nullity</span>) (<span class="id">xr</span> <span class="id">:</span> <span class="id">reality</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span id="x:452" class="id">
  <a name="x:452" class="">:</a>
</span> <span class="id">{compare</span> <span class="id">0%N</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xnz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">xr}</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">Signed.mk</span> (<span class="id">Posz_snum_subproof</span> <span class="id">x</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">Negz_snum_subproof</span> (<span class="id">n</span> <span id="n:453" class="id">
  <a name="n:453" class="">:</a>
</span> <span class="id">nat</span>) <span class="id">:</span> <span class="id">Signed.spec</span> <span class="id">0%Z</span> <span class="id">!=0</span> <span class="id">&lt;=0</span> (<span class="id">Negz</span> <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Canonical</span> <span class="id">Negz_snum</span> <span class="id">n</span> <span id="n:454" class="id">
  <a name="n:454" class="">:=</a>
</span> <span class="id">Signed.mk</span> (<span class="id">Negz_snum_subproof</span> <span class="id">n</span>).<br/>
<br/>
<span class="vernacular">End</span> <span class="id">IntStability</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">Morph0</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{R</span> <span id="R:455" class="id">
  <a name="R:455" class="">:</a>
</span> <span class="id">numDomainType}</span> <span class="id">{cond</span> <span class="id">:</span> <span class="id">reality}</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">nR</span> <span class="id">:=</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#Morph0.R">&amp;</a></span> <span class="id">?=0</span> <span class="id">&amp;</span> <span class="id">cond}</span>.<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> <span class="id">x</span> <span class="id">y</span> <span class="id">:</span> <span class="id">nR</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">num</span> <span class="id">:=</span> (<span class="id">@num</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">R</span>) <span class="id">?=0</span> <span class="id">cond</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_eq0</span> <span class="id">x</span> <span id="x:457" class="id">
  <a name="x:457" class="">:</a>
</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">x%:num</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.eqtype.html#::bool_scope:x_'=='_x">==</a></span> <span class="id">0</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">=</a></span> (<span class="id">x</span> <span class="id"><a href="mathcomp.analysis.signed.html#x:457">==</a></span> (<span class="id">widen_signed</span> <span class="id">0%:sgn</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">nR</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id">Morph0</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">Morph</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{d</span> <span id="d:458" class="id">
  <a name="d:458" class="">:</a>
</span> <span class="id">unit}</span> <span class="id">{T</span> <span id="T:459" class="id">
  <a name="T:459" class="">:</a>
</span> <span class="id">porderType</span> <span class="id">d}</span> <span class="id">{x0</span> <span class="id">:</span> <span class="id">T}</span> <span class="id">{nz</span> <span class="id">:</span> <span class="id">nullity}</span> <span class="id">{cond</span> <span class="id">:</span> <span class="id">reality}</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">sT</span> <span class="id">:=</span> <span class="id">{compare</span> <span class="id">x0</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">nz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::type_scope:'{'_'compare'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">cond}</span>.<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> <span class="id">x</span> <span class="id">y</span> <span class="id">:</span> <span class="id">sT</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">num</span> <span class="id">:=</span> (<span class="id">@num</span> <span class="id">_</span> <span class="id">_</span> <span class="id">x0</span> <span class="id">nz</span> <span class="id">cond</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_eq</span> <span class="id">:</span> <span class="id">{mono</span> <span class="id">num</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#::type_scope:'{'_'mono'_x_':'_x_x_'/'_x_'}'">:</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#::type_scope:'{'_'mono'_x_':'_x_x_'/'_x_'}'">y</a></span> <span id="y:466" class="id"><span id="y:464" class="id">
  <a name="y:466" class="">/</a>
</span></span> <span class="id">x</span> <span class="id"><a href="mathcomp.analysis.signed.html#x:463">==</a></span> <span class="id">y}</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<span class="vernacular">Lemma</span> <span class="id">num_le</span> <span class="id">:</span> <span class="id">{mono</span> <span class="id">num</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#::type_scope:'{'_'mono'_x_':'_x_x_'/'_x_'}'">:</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#::type_scope:'{'_'mono'_x_':'_x_x_'/'_x_'}'">y</a></span> <span id="y:470" class="id"><span id="y:468" class="id">
  <a name="y:470" class="">/</a>
</span></span> (<span class="id">x</span> <span class="id"><a href="mathcomp.analysis.signed.html#x:467">&lt;=</a></span> <span class="id">y</span>)<span class="id">%O}</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<span class="vernacular">Lemma</span> <span class="id">num_lt</span> <span class="id">:</span> <span class="id">{mono</span> <span class="id">num</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#::type_scope:'{'_'mono'_x_':'_x_x_'/'_x_'}'">:</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#::type_scope:'{'_'mono'_x_':'_x_x_'/'_x_'}'">y</a></span> <span id="y:474" class="id"><span id="y:472" class="id">
  <a name="y:474" class="">/</a>
</span></span> (<span class="id">x</span> <span class="id"><a href="mathcomp.analysis.signed.html#x:471">&lt;</a></span> <span class="id">y</span>)<span class="id">%O}</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<span class="vernacular">Lemma</span> <span class="id">num_min</span> <span class="id">:</span> <span class="id">{morph</span> <span class="id">num</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#::type_scope:'{'_'morph'_x_':'_x_x_'/'_x_'}'">:</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#::type_scope:'{'_'morph'_x_':'_x_x_'/'_x_'}'">y</a></span> <span id="y:478" class="id"><span id="y:476" class="id">
  <a name="y:478" class="">/</a>
</span></span> <span class="id">Order.min</span> <span class="id">x</span> <span class="id">y}</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">x</span> <span class="id">y;</span> <span class="id">rewrite</span> <span class="id">!minEle</span> <span class="id">num_le</span> <span class="id">-fun_if</span>. Qed.</div>
<span class="vernacular">Lemma</span> <span class="id">num_max</span> <span class="id">:</span> <span class="id">{morph</span> <span class="id">num</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#::type_scope:'{'_'morph'_x_':'_x_x_'/'_x_'}'">:</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#::type_scope:'{'_'morph'_x_':'_x_x_'/'_x_'}'">y</a></span> <span id="y:482" class="id"><span id="y:480" class="id">
  <a name="y:482" class="">/</a>
</span></span> <span class="id">Order.max</span> <span class="id">x</span> <span class="id">y}</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">x</span> <span class="id">y;</span> <span class="id">rewrite</span> <span class="id">!maxEle</span> <span class="id">num_le</span> <span class="id">-fun_if</span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id">Morph</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">MorphNum</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{R</span> <span id="R:483" class="id">
  <a name="R:483" class="">:</a>
</span> <span class="id">numDomainType}</span> <span class="id">{nz</span> <span class="id">:</span> <span class="id">nullity}</span> <span class="id">{cond</span> <span class="id">:</span> <span class="id">reality}</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">nR</span> <span class="id">:=</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#MorphNum.R">&amp;</a></span> <span class="id">nz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">cond}</span>.<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> (<span class="id">a</span> <span class="id">:</span> <span class="id">R</span>) (<span class="id">x</span> <span class="id">y</span> <span class="id">:</span> <span class="id">nR</span>).<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">num</span> <span class="id">:=</span> (<span class="id">@num</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">R</span>) <span class="id">nz</span> <span class="id">cond</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_abs_eq0</span> <span class="id">a</span> <span id="a:486" class="id">
  <a name="a:486" class="">:</a>
</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">`|a|%:nng</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.ssreflect.eqtype.html#::bool_scope:x_'=='_x">==</a></span> <span class="id">0%:nng</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">=</a></span> (<span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:486">==</a></span> <span class="id">0</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-normr_eq0</span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id">MorphNum</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">MorphReal</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{R</span> <span id="R:487" class="id">
  <a name="R:487" class="">:</a>
</span> <span class="id">numDomainType}</span> <span class="id">{nz</span> <span class="id">:</span> <span class="id">nullity}</span> <span class="id">{r</span> <span id="r:489" class="id">
  <a name="r:489" class="">:</a>
</span> <span class="id">real}</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">nR</span> <span class="id">:=</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#MorphReal.R">&amp;</a></span> <span class="id">nz</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'num'_x_'&'_x_'&'_x_'}'">&amp;</a></span> <span class="id">r}</span>.<br/>
<span class="vernacular">Implicit</span> <span class="gallina-kwd">Type</span> <span class="id">x</span> <span class="id">y</span> <span class="id">:</span> <span class="id">nR</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">num</span> <span class="id">:=</span> (<span class="id">@num</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">R</span>) <span class="id">nz</span> <span class="id">r</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_le_maxr</span> <span class="id">a</span> <span class="id">x</span> <span class="id">y</span> <span id="y:492" class="id">
  <a name="y:492" class="">:</a>
</span><br/>
&nbsp;&nbsp;<span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:490">&lt;=</a></span> <span class="id">Num.max</span> <span class="id">x%:num</span> <span class="id">y%:num</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">=</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">a</a></span> <span class="id"><a href="mathcomp.analysis.signed.html#a:490">&lt;=</a></span> <span class="id">x%:num</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">||</a></span> (<span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:490">&lt;=</a></span> <span class="id">y%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-comparable_le_maxr//</span> <span class="id">real_comparable</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_le_maxl</span> <span class="id">a</span> <span class="id">x</span> <span class="id">y</span> <span id="y:495" class="id">
  <a name="y:495" class="">:</a>
</span><br/>
&nbsp;&nbsp;<span class="id">Num.max</span> <span class="id">x%:num</span>  <span class="id">y%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:493">=</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">x%:num</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">a</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> (<span class="id">y%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">a</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-comparable_le_maxl//</span> <span class="id">real_comparable</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_le_minr</span> <span class="id">a</span> <span class="id">x</span> <span class="id">y</span> <span id="y:498" class="id">
  <a name="y:498" class="">:</a>
</span><br/>
&nbsp;&nbsp;<span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:496">&lt;=</a></span> <span class="id">Num.min</span> <span class="id">x%:num</span> <span class="id">y%:num</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">=</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">a</a></span> <span class="id"><a href="mathcomp.analysis.signed.html#a:496">&lt;=</a></span> <span class="id">x%:num</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> (<span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:496">&lt;=</a></span> <span class="id">y%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-comparable_le_minr//</span> <span class="id">real_comparable</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_le_minl</span> <span class="id">a</span> <span class="id">x</span> <span class="id">y</span> <span id="y:501" class="id">
  <a name="y:501" class="">:</a>
</span><br/>
&nbsp;&nbsp;<span class="id">Num.min</span> <span class="id">x%:num</span> <span class="id">y%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:499">=</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">x%:num</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">a</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">||</a></span> (<span class="id">y%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">a</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-comparable_le_minl//</span> <span class="id">real_comparable</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_lt_maxr</span> <span class="id">a</span> <span class="id">x</span> <span class="id">y</span> <span id="y:504" class="id">
  <a name="y:504" class="">:</a>
</span><br/>
&nbsp;&nbsp;<span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:502">&lt;</a></span> <span class="id">Num.max</span> <span class="id">x%:num</span> <span class="id">y%:num</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">=</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">a</a></span> <span class="id"><a href="mathcomp.analysis.signed.html#a:502">&lt;</a></span> <span class="id">x%:num</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">||</a></span> (<span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:502">&lt;</a></span> <span class="id">y%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-comparable_lt_maxr//</span> <span class="id">real_comparable</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_lt_maxl</span> <span class="id">a</span> <span class="id">x</span> <span class="id">y</span> <span id="y:507" class="id">
  <a name="y:507" class="">:</a>
</span><br/>
&nbsp;&nbsp;<span class="id">Num.max</span> <span class="id">x%:num</span>  <span class="id">y%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<'_x">&lt;</a></span> <span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:505">=</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">x%:num</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<'_x">&lt;</a></span> <span class="id">a</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> (<span class="id">y%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<'_x">&lt;</a></span> <span class="id">a</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-comparable_lt_maxl//</span> <span class="id">real_comparable</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_lt_minr</span> <span class="id">a</span> <span class="id">x</span> <span class="id">y</span> <span id="y:510" class="id">
  <a name="y:510" class="">:</a>
</span><br/>
&nbsp;&nbsp;<span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:508">&lt;</a></span> <span class="id">Num.min</span> <span class="id">x%:num</span> <span class="id">y%:num</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">=</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">a</a></span> <span class="id"><a href="mathcomp.analysis.signed.html#a:508">&lt;</a></span> <span class="id">x%:num</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> (<span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:508">&lt;</a></span> <span class="id">y%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-comparable_lt_minr//</span> <span class="id">real_comparable</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_lt_minl</span> <span class="id">a</span> <span class="id">x</span> <span class="id">y</span> <span id="y:513" class="id">
  <a name="y:513" class="">:</a>
</span><br/>
&nbsp;&nbsp;<span class="id">Num.min</span> <span class="id">x%:num</span> <span class="id">y%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<'_x">&lt;</a></span> <span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:511">=</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">x%:num</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<'_x">&lt;</a></span> <span class="id">a</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'||'_x">||</a></span> (<span class="id">y%:num</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<'_x">&lt;</a></span> <span class="id">a</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-comparable_lt_minl//</span> <span class="id">real_comparable</span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id">MorphReal</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">MorphGe0</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{R</span> <span id="R:514" class="id">
  <a name="R:514" class="">:</a>
</span> <span class="id">numDomainType}</span> <span class="id">{nz</span> <span class="id">:</span> <span class="id">nullity}</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">nR</span> <span class="id">:=</span> <span class="id">{num</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.signed.html#MorphGe0.R">&amp;</a></span> <span class="id">?=0</span> <span class="id">&amp;</span> <span class="id">&gt;=0}</span>.<br/>
<span class="vernacular">Implicit</span> <span class="gallina-kwd">Type</span> <span class="id">x</span> <span class="id">y</span> <span class="id">:</span> <span class="id">nR</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id">num</span> <span class="id">:=</span> (<span class="id">@num</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">R</span>) <span class="id">?=0</span> <span class="id">&gt;=0</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_abs_le</span> <span class="id">a</span> <span class="id">x</span> <span id="x:517" class="id">
  <a name="x:517" class="">:</a>
</span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:516">-&gt;</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">`|a|%:nng</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">=</a></span> (<span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:516">&lt;=</a></span> <span class="id">x%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">a0;</span> <span class="id">rewrite</span> <span class="id">-num_le//=</span> <span class="id">ger0_norm</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">num_abs_lt</span> <span class="id">a</span> <span class="id">x</span> <span id="x:519" class="id">
  <a name="x:519" class="">:</a>
</span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:518">-&gt;</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">`|a|%:nng</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<'_x">&lt;</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'='_x">=</a></span> (<span class="id">a</span> <span class="id"><a href="mathcomp.analysis.signed.html#a:518">&lt;</a></span> <span class="id">x%:num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">a0;</span> <span class="id">rewrite</span> <span class="id">-num_lt/=</span> <span class="id">ger0_norm</span>. Qed.</div>
<span class="vernacular">End</span> <span class="id">MorphGe0</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">Posnum</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">R</span> <span id="R:520" class="id">
  <a name="R:520" class="">:</a>
</span> <span class="id">numDomainType</span>) (<span class="id">x</span> <span id="x:521" class="id">
  <a name="x:521" class="">:</a>
</span> <span class="id">R</span>) (<span class="id">x_gt0</span> <span class="id">:</span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<'_x">&lt;</a></span> <span class="id">x</span>).<br/>
<span class="vernacular">Lemma</span> <span class="id">posnum_subdef</span> <span class="id">:</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">x</a></span> <span class="id"><a href="mathcomp.analysis.signed.html#Posnum.x">!=</a></span> <span class="id">0</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&&'_x">&amp;&amp;</a></span> (<span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">x</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-lt_def</span>. Qed.</div>
<span class="vernacular">Definition</span> <span class="id">PosNum</span> <span class="id">:</span> <span class="id">{posnum</span> <span class="id">R}</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'posnum'_x_'}'">:=</a></span> <span class="id">@Signed</span>.<span class="id">mk</span> <span class="id">_</span> <span class="id">_</span> <span class="id">0</span> <span class="id">!=0</span> <span class="id">&gt;=0</span> <span class="id">_</span> <span class="id">posnum_subdef</span>.<br/>
<span class="vernacular">End</span> <span class="id">Posnum</span>.<br/>
<span class="vernacular">Definition</span> <span class="id">NngNum</span> (<span class="id">R</span> <span id="R:523" class="id">
  <a name="R:523" class="">:</a>
</span> <span class="id">numDomainType</span>) (<span class="id">x</span> <span id="x:524" class="id">
  <a name="x:524" class="">:</a>
</span> <span class="id">R</span>) (<span class="id">x_ge0</span> <span class="id">:</span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">x</span>) <span class="id">:</span> <span class="id">{nonneg</span> <span class="id">R}</span> <span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:'{'_'nonneg'_x_'}'">:=</a></span><br/>
&nbsp;&nbsp;(<span class="id">@Signed</span>.<span class="id">mk</span> <span class="id">_</span> <span class="id">_</span> <span class="id">0</span> <span class="id">?=0</span> <span class="id">&gt;=0</span> <span class="id">x</span> <span class="id">x_ge0</span>).<br/>
<br/>
<span class="vernacular">CoInductive</span> <span class="id">posnum_spec</span> (<span class="id">R</span> <span id="R:526" class="id">
  <a name="R:526" class="">:</a>
</span> <span class="id">numDomainType</span>) (<span class="id">x</span> <span id="x:527" class="id">
  <a name="x:527" class="">:</a>
</span> <span class="id">R</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">bool</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">bool</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">bool</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="gallina-kwd">Type</span> <span class="id">:=</span><br/>
<span class="id">|</span> <span class="id">IsPosnum</span> (<span class="id">p</span> <span id="p:530" class="id">
  <a name="p:530" class="">:</a>
</span> <span class="id">{posnum</span> <span class="id">R}</span>) <span class="id">:</span> <span class="id">posnum_spec</span> <span class="id">x</span> (<span class="id">p%:num</span>) <span class="id">false</span> <span class="id">true</span> <span class="id">true</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">posnumP</span> (<span class="id">R</span> <span id="R:531" class="id">
  <a name="R:531" class="">:</a>
</span> <span class="id">numDomainType</span>) (<span class="id">x</span> <span id="x:532" class="id">
  <a name="x:532" class="">:</a>
</span> <span class="id">R</span>) <span class="id">:</span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<'_x">&lt;</a></span> <span class="id">x</span> <span class="id"><a href="mathcomp.analysis.signed.html#x:532">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">posnum_spec</span> <span class="id">x</span> <span class="id">x</span> (<span class="id">x</span> <span class="id"><a href="mathcomp.analysis.signed.html#x:532">==</a></span> <span class="id">0</span>) (<span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">x</span>) (<span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<'_x">&lt;</a></span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
<span class="id">move=&gt;</span> <span class="id">x_gt0;</span> <span class="id">case:</span> <span class="id">real_ltgt0P</span> (<span class="id">x_gt0</span>) <span class="id">=&gt;</span> <span class="id">[];</span> <span class="id">rewrite</span> <span class="id">?gtr0_real</span> <span class="id">//</span> <span class="id">=&gt;</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-[x]/</span>(<span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:x_'%:num'">PosNum</a></span> <span class="id">x_gt0</span>)<span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:x_'%:num'">%:num;</a></span> <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">CoInductive</span> <span class="id">nonneg_spec</span> (<span class="id">R</span> <span id="R:533" class="id">
  <a name="R:533" class="">:</a>
</span> <span class="id">numDomainType</span>) (<span class="id">x</span> <span id="x:534" class="id">
  <a name="x:534" class="">:</a>
</span> <span class="id">R</span>) <span class="id">:</span> <span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id">bool</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="gallina-kwd">Type</span> <span class="id">:=</span><br/>
<span class="id">|</span> <span class="id">IsNonneg</span> (<span class="id">p</span> <span id="p:537" class="id">
  <a name="p:537" class="">:</a>
</span> <span class="id">{nonneg</span> <span class="id">R}</span>) <span class="id">:</span> <span class="id">nonneg_spec</span> <span class="id">x</span> (<span class="id">p%:num</span>) <span class="id">true</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">nonnegP</span> (<span class="id">R</span> <span id="R:538" class="id">
  <a name="R:538" class="">:</a>
</span> <span class="id">numDomainType</span>) (<span class="id">x</span> <span id="x:539" class="id">
  <a name="x:539" class="">:</a>
</span> <span class="id">R</span>) <span class="id">:</span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">x</span> <span class="id"><a href="mathcomp.analysis.signed.html#x:539">-&gt;</a></span> <span class="id">nonneg_spec</span> <span class="id">x</span> <span class="id">x</span> (<span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">xge0;</span> <span class="id">rewrite</span> <span class="id">xge0</span> <span class="id">-[x]/</span>(<span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:x_'%:num'">NngNum</a></span> <span class="id">xge0</span>)<span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:x_'%:num'">%:num;</a></span> <span class="id">constructor</span>. Qed.</div>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<div class="doc">These proofs help integrate more arithmetic with signed.v. The issue is
    Terms like `0 &lt; 1-q` with subtraction don't work well. So we hide the
    subtractions behind `PosNum` and `NngNum` constructors, see sequences.v
    for examples. </div>
<span class="vernacular">Section</span> <span class="id">onem_signed</span>.<br/>
<span class="vernacular">Variable</span> <span class="id">R</span> <span id="onem_signed.R" class="id">
  <a name="onem_signed.R" class="">:</a>
</span> <span class="id">numDomainType</span>.<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> <span class="id">r</span> <span class="id">:</span> <span class="id">R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">onem_PosNum</span> <span class="id">r</span> (<span class="id">r1</span> <span class="id">:</span> <span class="id">r</span> <span class="id"><a href="mathcomp.analysis.signed.html#r:541">&lt;</a></span> <span class="id">1</span>) <span class="id">:</span> <span class="id">`1-r</span> <span class="id"><a href="mathcomp.analysis.signed.html#r:541">=</a></span> (<span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:x_'%:num'">PosNum</a></span> (<span class="id">onem_gt0</span> <span class="id">r1</span>))<span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:x_'%:num'">%:num</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">onemX_NngNum</span> <span class="id">r</span> (<span class="id">r1</span> <span class="id">:</span> <span class="id">r</span> <span class="id"><a href="mathcomp.analysis.signed.html#r:543">&lt;=</a></span> <span class="id">1</span>) (<span class="id">r0</span> <span class="id">:</span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc/mathcomp.algebra.ssrnum.html#Num.Syntax.::ring_scope:x_'<='_x">&lt;=</a></span> <span class="id">r</span>) <span class="id">n</span> <span id="n:546" class="id">
  <a name="n:546" class="">:</a>
</span><br/>
&nbsp;&nbsp;<span class="id">`1-</span>(<span class="id">r</span> <span class="id"><a href="mathcomp.analysis.signed.html#r:543">^+</a></span> <span class="id">n</span>) <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#::ring_scope:'`1-'_x">=</a></span> (<span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:x_'%:num'">NngNum</a></span> (<span class="id">onemX_ge0</span> <span class="id">n</span> <span class="id">r0</span> <span class="id">r1</span>))<span class="id"><a href="mathcomp.analysis.signed.html#Signed.Exports.::ring_scope:x_'%:num'">%:num</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id">onem_signed</span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
</body>
</html>
